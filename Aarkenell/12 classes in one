require "herorealms"
require "decks"
require "stdlib"
require "stdcards"
require "hardai"
require "mediumai"
require "easyai"

--[[ Updated 12.04.2024 by Aarkenell
]]

-- Game start --
local function chooseStart()
    return cardChoiceSelectorEffect({
        id = "SoG_Choice",
        name = "First choice",
        trigger = startOfTurnTrigger,

        upperTitle  = "Welcome! How would you like to proceed?",
        lowerTitle  = "",
-- 1.1 choice
        effectFirst= pushChoiceEffectWithTitle(
                                {
								
                                    choices = {  
								-- 1.1a choice - choose custom						
										{
                                           effect = moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)).union(selectLoc(loc(currentPid, deckPloc)).union(selectLoc(loc(currentPid, skillsPloc)).union(selectLoc(loc(currentPid, reservePloc))
			.union(selectLoc(loc(currentPid, buffsPloc)).where(isCardType(ogreType).Or(isCardType(orcType)).Or(isCardType(elfType).Or(isCardType(dwarfType).Or(isCardType(smallfolkType)).Or(isCardType(halfDemonType)).Or(isCardType(magicArmorType)).Or(isCardName("smallfolk_hide_buff"))))))))))
			.seq(gainCombatEffect(-1))
			.seq(setPlayerNameEffect("Unknown", currentPid))
			.seq(setPlayerAvatarEffect("assassin", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(50).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(50))
			.seq(createCardEffect(choose_S_and_R_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_paladin_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_witch_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_shaman_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_king_midas_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_brewmaster_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_thandarlorian_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_terramancer_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_pyromancer_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_cryomancer_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_apothecary_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(choose_demonologist_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(handPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(waitForClickEffect("Please play the card corresponding to the class you wish to play.", ""))
			.seq(waitForClickEffect("Note: Game does not currently work properly if both players choose Pyromancer or both choose Terramancer.")),
        
            layout = createLayout({
            name = "Pick a custom class",
            art = "art/T_Storm_Siregar",
            xmlText=[[<vlayout>
<hlayout flexiblewidth="1">
<text text="Choose 1 of 12
level 3 Custom Characters to play." fontsize="26"/>
</hlayout>
</vlayout>
			
			]]
			}),
                                            tags = {}
                                        },
								-- 1.1b choice - choose standard
										{
                                           effect = pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use your standard Hero?",
					lowerTitle = ""
					}),
                                            layout = createLayout({
            name = "Selected class",
            art = "art/T_All_Heroes",
            xmlText=[[
			<vlayout>
<hlayout flexiblewidth="1">
<text text="Play as the character you selected when setting up the game." fontsize="26"/>
</hlayout>
</vlayout>
			]] }),
                                            tags = {}
                                        }
                                    },
					
        upperTitle  = "Make your choice.",
        lowerTitle  = "Do you want to play as a custom class, or use the character you picked when starting the game?",

					}),
-- 1.2 choice		
		effectSecond = pushChoiceEffectWithTitle(
                                {
								
                                    choices = {  
								-- 1.2a choice - Updates to this mod					
										{
                                           effect = nullEffect(),
        
            layout = createLayout({
            name = "Updates to this mod",
            art = "art/T_fighter_sharpening_stone",
            xmlText=[[<vlayout>
<hlayout flexiblewidth="1">
<text text="SnR Enjoyer class added
Terramancer class added 04.04.24 - reworked 07.04.24
Demonologist class updates
SnR custom cards removed from market deck (Parson’s the Insider Promo card remains)
Demon Hunter custom card added to market deck
" fontsize="16"/>
</hlayout>
</vlayout>			
			]]
			}),
                                            tags = {}
                                        },
								-- 1.2b choice - Other mods to try
										{
                                           effect = nullEffect(),
                                            layout = createLayout({
            name = "Other mods to try",
            art = "art/treasures/T_spyglass",
            xmlText=[[
			<vlayout>
<hlayout flexiblewidth="1">
<text text="New mods by community members:

&lt;size=100%&gt;Industrialisation &lt;size=70%&gt;- by Userkaffe
&lt;size=100%&gt;Mythic Mercenaries &lt;size=70%&gt;- by Aarkenell
&lt;size=100%&gt;Sudden Death &lt;size=70%&gt;- by WardenSlayer

&lt;size=90%&gt;Look out for these games in the custom lobby, or join the RealmsRising Discord to request custom challenges." fontsize="16"/>
</hlayout>
</vlayout>
			]] }),
                                            tags = {}
                                        },
										  
								-- 1.2c choice - Resolving game crashes						
										{
                                           effect = storyTellEffectWithPortrait("origins_flawless_track", "Hi Folks – Aarkenell here – thanks for playing this mod. I hope you’re enjoying it.")
 .seq(storyTellEffectWithPortrait("origins_flawless_track", "If you play HR on a mobile device and you’ve been playing custom games for a while"))
  .seq(storyTellEffectWithPortrait("origins_flawless_track", "you may notice that your games take longer to load or that the app crashes if you try to play more than one custom game in your queue."))
     .seq(storyTellEffectWithPortrait("origins_flawless_track", "A few community members and I have flagged this issue with the WWG team."))
     .seq(storyTellEffectWithPortrait("origins_flawless_track", "We know many people play exclusively on mobile, and this issue really detracts from your play experience."))
	   .seq(storyTellEffectWithPortrait("origins_flawless_track", "We don’t know if/when they will be able to resolve this. So in the meantime, here’s a temporary fix:"))
	     .seq(storyTellEffectWithPortrait("origins_flawless_track", "If you encounter game crashes whilst playing custom games, uninstalling and reinstalling the HR app will fix this issue. "))
		   .seq(storyTellEffectWithPortrait("origins_flawless_track", "At least until you play a bunch more custom games."))
		     .seq(storyTellEffectWithPortrait("origins_flawless_track", "(I play a lot of custom games and have only had to reinstall the game 2-3 times in about 18 months.)"))
			   .seq(storyTellEffectWithPortrait("origins_flawless_track", "This will, of course, mean the app needs to download all of the file packages again, "))
			     .seq(storyTellEffectWithPortrait("origins_flawless_track", "so you may want to do this whilst you’ve got access to a decent wifi connection. "))
				 .seq(storyTellEffectWithPortrait("origins_flawless_track", "But at least you’ll be able to get back to your regular playing experience."))
				 .seq(storyTellEffectWithPortrait("origins_flawless_track", "If/when WWG inform us of a more permanent fix, I’ll let you know."))
				 .seq(storyTellEffectWithPortrait("origins_flawless_track", "Until then, happy gaming!"))
				 .seq(leftStoryTellEffectWithPortrait("origins_flawless_track", "Now, please hit 'Undo' to return to the menu."))
				 ,
        
            layout = createLayout({
            name = "Resolving game crashes",
            art = "art/T_word_of_power",
            xmlText=[[<vlayout>
<hlayout flexiblewidth="1">
<text text="Playing on a mobile device?
Custom games crashing?
Here's how to fix it." fontsize="26"/>
</hlayout>
</vlayout>
			
			]]
			}),
                                            tags = {}
                                        },
								-- 1.2d choice - Community news
										{
                                           effect = storyTellEffectWithPortrait("ogre", "Hi! I’m Rob d’Ogrety, CEO of ‘Why’s Wizard Games?’")
				 .seq(leftStoryTellEffectWithPortrait("inquisition", "And I’m Dwarfin Kastle – creator of the award-winning deckbuilding game about growing trees in space – Star Elms."))
				 .seq(storyTellEffectWithPortrait("ogre", "We just wanted to take a moment to say how much we love the community that has sprung up around Hero Realms…"))
				 .seq(leftStoryTellEffectWithPortrait("inquisition", "We love you!"))
				 .seq(storyTellEffectWithPortrait("ogre", " …and how much we love the experiments and new ideas being offered through custom lua scripting."))
				 .seq(leftStoryTellEffectWithPortrait("inquisition", "Yeah! We love lua!"))
				 .seq(leftStoryTellEffectWithPortrait("inquisition", "Lua, Lua! Oh baby! Me gotta go! Aye-yi-yi-yi!"))
				 .seq(storyTellEffectWithPortrait("ogre", "<cough> Thanks DK."))
				 .seq(storyTellEffectWithPortrait("ogre", "Be sure to join the Realms Rising server on Discord to share your feedback on this mod and to discover new custom games to play."))
				 .seq(storyTellEffectWithPortrait("ogre", "And listen to the Sparks and Recreation podcast for information on Community events, meta-analysis, and everything Hero Realms."))
				 .seq(storyTellEffectWithPortrait("ogre", "Or jump over to RealmsRising.com for in-depth articles on strategy and gameplay."))
				 .seq(storyTellEffectWithPortrait("origins_flawless_track", "And if you have ideas for new custom classes or scenarios you’d like to see, drop me, Aarkenell, a message in the Realms Rising Discord."))
				 .seq(storyTellEffectWithPortrait("ogre", "Whether you join the Realms Rising community or not, we hope you keep enjoying the game and all the custom content from our great community. "))
				 .seq(storyTellEffectWithPortrait("ogre", "Bye for now."))
				 .seq(leftStoryTellEffectWithPortrait("inquisition", "Lua, Lua! Oh baby! We gotta go. Bye-yi-yi-yi!"))
				 .seq(storyTellEffectWithPortrait("origins_flawless_track", "Please hit 'Undo' to return to the menu."))
				 ,
                                            layout = createLayout({
            name = "Community News",
            art = "art/T_borg_ogre_mercenary",
            xmlText=[[
			<vlayout>
<hlayout flexiblewidth="1">
<text text="A word from our sponsors" fontsize="26"/>
</hlayout>
</vlayout>
			]] }),
                                            tags = {}
                                        }
                                    
                                    },
					
        upperTitle  = "What do you want to learn about?",
        lowerTitle  = "Be sure to hit 'Undo' after your selection, to return to the selection menu.",

					}),

-- 1.1 layout
        layoutFirst = createLayout({
            name = "To Battle!",
            art = "art/T_Unify_Apsara",
            xmlText=[[<vlayout>
<hlayout flexiblewidth="1">
<text text="Choose your class and start the game." fontsize="26"/>
</hlayout>
</vlayout>
			
			]]
			}),

-- 1.2 layout
        layoutSecond = createLayout({
            name = "Updates & Info",
            art = "art/treasures/T_Magic_Scroll_Souveraine",
            xmlText=[[
			<vlayout>
<hlayout flexiblewidth="1">
<text text="Learn about:
Updates to this mod
Other mods to try
Resolving game crashes
Community news"
fontsize="26"/>
</hlayout>
</vlayout>
			]] }) ,

        turn = 1
    })
end


-- Custom Class Selection cards
function choose_demonologist_carddef()
    return createDef({
        id="choose_demonologist",
        name="Choose the Demonologist",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_demonologist",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) --here--
			.seq(setPlayerNameEffect("Demonologist", currentPid))
			.seq(setPlayerAvatarEffect("ruinos_zealot", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(50).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(50))
			.seq(createCardEffect(demonologist_summon_demon_carddef(), currentSkillsLoc))
			.seq(createCardEffect(demonologist_summon_demon_master_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc))) --here--
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(demonologist_shadow_feeder_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(demonologist_void_guard_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(demonologist_lesser_devourer_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(demonologist_shadow_gem_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Demonologist?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Demonologist",
            art = "art/T_Tyrannor_The_Devourer",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3
Demonologist" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="
- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>

<box flexibleheight="1">
        <tmpro text="- Updated 04.04.2024-" fontsize="14" fontstyle="italic"/>
    </box>
</vlayout>

			]]
			}),
        })
	end

function choose_apothecary_carddef()
    return createDef({
        id="choose_apothecary",
        name="Choose the Apothecary",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_apothecary",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Apothecary", currentPid))
			.seq(setPlayerAvatarEffect("alchemist_01", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(52).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(52))
			.seq(createCardEffect(apothecary_restorative_draught_carddef(), currentSkillsLoc))
			.seq(createCardEffect(apothecary_custom_brew_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(apothecary_mezzaluna_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(apothecary_apprentice_potion_maker_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(apothecary_yellow_potion_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(apothecary_red_potion_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(apothecary_green_potion_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Apothecary?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Apothecary",
            art = "art/treasures/T_Green_Potions_Medium",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Apothecary" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_cryomancer_carddef()
    return createDef({
        id="choose_cryomancer",
        name="Choose the Cryomancer",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_cryomancer",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Cryomancer", currentPid))
			.seq(setPlayerAvatarEffect("rayla__endweaver_flipped", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(52).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(52))
			.seq(createCardEffect(cryomancer_frostbiteskill_carddef(), currentSkillsLoc))
			.seq(createCardEffect(cryomancer_blizzard_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cryomancer_ice_burst_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cryomancer_ice_shield_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cryomancer_ice_gem_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cryomancer_freeze_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Cryomancer?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Cryomancer",
            art = "art/T_Heavy_Gust",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Cryomancer" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_pyromancer_carddef()
    return createDef({
        id="choose_pyromancer",
        name="Choose the Pryomancer",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_pyromancer",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Pyromancer", currentPid))
			.seq(setPlayerAvatarEffect("summoner", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(48).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(48))
			.seq(createCardEffect(pyromancer_fuel_1carddef(), currentSkillsLoc))
			.seq(createCardEffect(pyromancer_conflagration_1p_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(pyromancer_sear_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(pyromancer_scorch_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(pyromancer_fire_shard_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(pyromancer_combust_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Pyromancer?",
					lowerTitle = "Note: Skills and Abilities will not work properly if both players have chosen Pyromancer."
					}))
            })
        },
        layout = createLayout({
            name = "Pyromancer",
            art = "art/T_Blistering_Blaze",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Pyromancer" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>

<box flexibleheight="1">
        <tmpro text="- Updated 06.09.2023-" fontsize="14" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_terramancer_carddef()
    return createDef({
        id="choose_terramancer",
        name="Choose the Terramancer",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_terramancer",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Terramancer", currentPid))
			.seq(setPlayerAvatarEffect("broelyn", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(53).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(53))
			.seq(createCardEffect(terramancer_move_earth_carddef(), currentSkillsLoc))
			.seq(createCardEffect(terramancer_swallowed_by_the_earth_def(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(terramancer_earth_gem_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(terramancer_hurl_boulder_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(terramancer_tremor_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(terramancer_clay_golem_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Terramancer?",
					lowerTitle = "Note: Skills and Abilities will not work properly if both players have chosen Terramancer."
					}))
            })
        },
        layout = createLayout({
            name = "Terramancer",
            art = "art/T_Broelyn_Loreweaver_Old",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3
Terramancer" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="
- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>
<box flexibleheight="1">
        <tmpro text="
- Re-worked 07.04.2024 -
- Updated 09.04.2024 -" fontsize="14" fontstyle="italic"/>
    </box>
</vlayout>

			]]
			}),
        })
	end

function choose_thandarlorian_carddef()
    return createDef({
        id="choose_thandarlorian",
        name="Choose the Thandarlorian",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_thandarlorian",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Thandarlorian", currentPid))
			.seq(setPlayerAvatarEffect("cristov__the_just", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(36).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(const(36).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(createCardEffect(thandarlorian_dragon_shard_armour_carddef(), currentSkillsLoc))
			.seq(createCardEffect(thandarlorian_bracer_blades_carddef(), currentSkillsLoc))
			.seq(createCardEffect(thandarlorian_whipcord_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(thandarlorian_coordinated_attack_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(thandarlorian_combat_shield_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(thandarlorian_hand_ballista_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(thandarlorian_bounty_hunters_stone_of_seeking_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(shortsword_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Thandarlorian?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "The Thandarlorian",
            art = "art/T_Domination",
            frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Thandarlorian" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>
			]]
        })
    })
	end

function choose_paladin_carddef()
    return createDef({
        id="choose_paladin",
        name="Choose the Paladin",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_paladin",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Paladin", currentPid))
			.seq(setPlayerAvatarEffect("cristov__the_just", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(58).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(58))
			.seq(createCardEffect(paladin_prayer_carddef(), currentSkillsLoc))
			.seq(createCardEffect(paladin_sacred_oath_carddef(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(),loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(paladin_warhammer_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(paladin_crusader_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cleric_spiked_mace_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(fighter_longsword_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Paladin?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Paladin",
            art = "art/T_Cristov_The_Just",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Paladin" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by agentC13 -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_witch_carddef()
    return createDef({
        id="choose_witch",
        name="Choose the Witch",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_witch",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Witch", currentPid))
			.seq(setPlayerAvatarEffect("chanting_cultist", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(51).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(51))
			.seq(createCardEffect(siphon_life_def(), currentSkillsLoc))
			.seq(createCardEffect(piercing_screech_def(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(witch_flash_freeze_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(witch_flash_freeze_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(cleric_everburning_candle_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(witch_cauldron_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(wizard_cat_familiar_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Witch?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Witch",
            art = "avatars/chanting_cultist",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Witch" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Userkaffe -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_shaman_carddef()
    return createDef({
        id="choose_shaman",
        name="Choose the Shaman",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_shaman",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Shaman", currentPid))
			.seq(setPlayerAvatarEffect("wolf_shaman", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(50).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(const(50).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(createCardEffect(gift_of_the_elements_carddef(), currentSkillsLoc))
			.seq(createCardEffect(elemental_surge_def(), currentSkillsLoc))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(ruby_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(natures_blessing_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(flame_burst_carddef(), loc(currentPid, asidePloc)))
            .seq(createCardEffect(flame_burst_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(call_lightning_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Shaman?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Shaman",
            art = "avatars/wolf_shaman",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Shaman" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Filtrophobe -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>

			]]
			}),
        })
	end

function choose_king_midas_carddef()
    return createDef({
        id="choose_king_midas",
        name="Choose King Midas",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_king_midas",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("King Midas", currentPid))
			.seq(setPlayerAvatarEffect("profit", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(42).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(42))
			.seq(createCardEffect(greed_is_good_skilldef(), currentSkillsLoc))
			.seq(createCardEffect(golden_touch_abilitydef(), currentSkillsLoc))
			.seq(createCardEffect(midas_kings_adviser_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_kings_adviser_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_kings_adviser_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_kings_adviser_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_liquid_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(midas_liquid_gold_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use King Midas?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "King Midas",
            art = "art/T_Bribe",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 King Midas" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Zabuza -" fontsize="22" fontstyle="italic"/>
    </box>
</vlayout>

			]]
			}),
        })
	end

function choose_brewmaster_carddef()
    return createDef({
        id="choose_brewmaster",
        name="Choose the Brewmaster",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_brewmaster",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Brewmaster", currentPid))
			.seq(setPlayerAvatarEffect("lord_callum", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(55).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(55))
			.seq(createCardEffect(brewmaster_a_round_on_the_house_def(), currentSkillsLoc))
			.seq(createCardEffect(brewmaster_get_out_of_my_bar_carddef(), currentSkillsLoc))
			.seq(createCardEffect(brewmaster_mead_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_mead_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_mead_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_mead_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_spilled_drink_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_tap_a_keg_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_serve_the_strong_stuff_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_regular_regulars_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_irregular_regulars_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(brewmaster_zaboozer_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
						.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Brewmaster?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "Brewmaster",
            art = "art/treasures/T_Fighter_Elixir_Red",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3 Brewmaster" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="- Class by Aarkenell -" fontsize="22" fontstyle="italic"/>
    </box>

<box flexibleheight="1">
        <tmpro text="- Updated 07.04.2024 -" fontsize="14" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end

function choose_S_and_R_carddef()
    return createDef({
        id="choose_S&R",
        name="Choose Sparks & Rec Enjoyer",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="choose_S&R",
                trigger= onPlayTrigger,
				playAllType = noPlayPlayType,
                effect = sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)))
			.seq(moveTarget(sacrificePloc).apply(selectLoc(loc(currentPid, handPloc)))) 
			.seq(setPlayerNameEffect("Sparks & Rec Enjoyer", currentPid))
			.seq(setPlayerAvatarEffect("ambushers", currentPid))
			.seq(gainMaxHealthEffect(currentPid, const(54).add(getPlayerMaxHealth(currentPid).negate())))
			.seq(gainHealthEffect(54))
			.seq(createCardEffect(bird_dog_def(), currentSkillsLoc))
			.seq(createCardEffect(patron_shoutout_def(), currentSkillsLoc))
			.seq(createCardEffect(situational_card_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(situational_card_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(situational_card_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(situational_card_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(situational_card_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(hero_dash_helper_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(wwyd_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(nostra_dbl_damus_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(blank_to_my_blank_carddef(), loc(currentPid, asidePloc)))
			.seq(createCardEffect(congrats_youre_a_nerd_carddef(), loc(currentPid, asidePloc)))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
						.seq(sacrificeTarget().apply(selectSource()))
			.seq(moveTarget(deckPloc).apply(selectLoc(loc(currentPid, asidePloc))))
			.seq(shuffleEffect(currentDeckLoc))
			.seq(sacrificeTarget().apply(selectSource()))
			.seq(pushChoiceEffectWithTitle(
                                {
                                    choices = {                                
										{
                                           effect = moveTarget(tradeDeckLoc).apply(selectLoc(centerRowLoc))
													.seq(shuffleTradeDeckEffect())
													.seq(refillMarketEffect(const(0)).seq(refillMarketEffect(const(1))).seq(refillMarketEffect(const(2))).seq(refillMarketEffect(const(3))).seq(refillMarketEffect(const(4))))
													.seq(addEffect(endTurnEffect())),
                                            layout = createLayout(
                {
                    name = "Yes",
                    art = "art/treasures/T_cleric_elixir_green",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Accept choice.
Start playing." fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        },
										
										{
                                           effect = nullEffect(),
                                            layout = createLayout(
                {
                    name = "No",
                    art = "art/treasures/T_cleric_elixir_blue_purple",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
   <hlayout flexibleheight="3">
 <tmpro text="Pick again.
&lt;size=65%&gt;(Click this card, then 'Undo'.)" fontsize="30" flexiblewidth="1" />
</hlayout>
</vlayout>
					]],

                }
            ),
                                            tags = {}
                                        }
                                    },
					upperTitle = "Confirm your choice. Do you want to use the Sparks & Recreations Enjoyer?",
					lowerTitle = ""
					}))
            })
        },
        layout = createLayout({
            name = "S&R Enjoyer",
            art = "avatars/ambushers",
			frame = "frames/Coop_Campaign_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="2">
        <tmpro text="Play as a level 3
Sparks and Recreations Enjoyer" fontsize="24"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="
- Class by WardenSlayer -" fontsize="22" fontstyle="italic"/>
    </box>

<box flexibleheight="1">
        <tmpro text="- Added 04.04.2024-" fontsize="14" fontstyle="italic"/>
    </box>
</vlayout>
			]]
			}),
        })
	end




-- Demonologist cards
function demonologist_shadow_gem_carddef()
    return createDef(
        {
            id = "demonologist_shadow_gem",
            name = "Shadow Gem",
            types = {gemType, noStealType, itemType},
			            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
				createAbility(
                    {
                        id = "demonologist_shadow_gem_sac",
                        PlayAllType = noPlayPlayType,
						cost = noCost,
						trigger = autoTrigger,
                        activations = singleActivations,
						                        effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainGoldEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Shadow Gem",
                                                    art = "art/treasures/T_Brillant_Ruby",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <icon text="{gold_2}" fontsize="60"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainCombatTag}
                                        },
                                        {
                                            effect = pushTargetedEffect({
												desc = "Lose <sprite name=\"health_1\"> to give one minion +2 <sprite name=\"shield\"> until your next turn.",
												validTargets = selectLoc(currentInPlayLoc).where(isCardType(minionType)),
												min = 0,
												max = 1,
												check = minHealthCurrent(2),
												targetEffect = grantHealthTarget(2, { SlotExpireEnum.startOfOwnerTurn }, nullEffect(), "shadow").seq(hitSelfEffect(1)),
												}),
                                            layout = layoutCard(
                                                {
                                                    title = "Shadow Gem",
                                                    art = "art/treasures/T_Brillant_Ruby",
                                                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{health_-1}" fontsize="42"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="Give one minion +2{shield} until your next turn." fontsize="24" />
    </box>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Shadow Gem",
                    art = "art/treasures/T_Brillant_Ruby",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="2">
        <tmpro text="{gold_2}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="OR
{health_-1} Give one minion +2{shield} until your next turn." fontsize="24" />
    </box>
</vlayout>
					]]
                }
            )
        }
    )
end

function demonologist_shadow_feeder_carddef()
    return createChampionDef(
        {
            id = "demonologist_shadow_feeder",
            name = "Shadow Feeder",
			types = {minionType, demonType, championType, nosteaalType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "Shadow_feeder_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = ifElseEffect(selectLoc(currentInPlayLoc).where(isCardType(demonType)).count().gte(1),gainCombatEffect(3),gainCombatEffect(1))
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Shadow Feeder",
                    art = "art/T_Devil",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
<hlayout flexibleheight="7.7">
            <tmpro text="{expend}" fontsize="40" flexiblewidth="1"/>
            <vlayout flexiblewidth="6">
                                <icon text="{combat_1}" fontsize="40" alignment="Center" flexibleheight="1"/>
                                <tmpro text="+{combat_2}  if you have another Demon in play." fontsize="26" alignment="Center" flexibleheight="6.6"/>          
            </vlayout>
    </hlayout>
</vlayout>
					]],
                    health = 2,
                    isGuard = false
                }
            )
        }
    )
end

function demonologist_void_guard_carddef()
    return createChampionDef(
        {
            id = "demonologist_void_guard",
            name = "Void guard",
			types = {minionType, championType, demonType, nosteaalType},
            acquireCost = 0,
            health = 2,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "void_guard_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(1)
						
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Void guard",
                    art = "art/T_Midnight_Knight",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="3">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <tmpro text="{combat_1}" fontsize="50" flexiblewidth="12" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="2">
            <tmpro text="You can't a-void him." fontsize="20" fontstyle="italic" flexiblewidth="10" />
    </hlayout> 
</vlayout>
					]],
                    health = 2,
                    isGuard = true
                }
            )
        }
    )
end

function demonologist_lesser_devourer_carddef()
    return createChampionDef(
        {
            id = "demonologist_lesser_devourer",
            name = "Lesser Devourer",
			types = {minionType, championType, demonType, nosteaalType},
            acquireCost = 0,
            health = 2,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "lesser_devourer_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = hitSelfEffect(1).seq(grantHealthTarget(1, { SlotExpireEnum.LeavesPlay }, nullEffect(), "shadow").apply(selectSource())),
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Lesser Devourer",
                    art = "art/T_Demon",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText = [[
<vlayout>
<hlayout flexibleheight="7.7">
            <tmpro text="{expend}" fontsize="40" flexiblewidth="1"/>
            <vlayout flexiblewidth="6">
                                <icon text="{health_-1}" fontsize="40" alignment="Center" flexibleheight="1"/>
                                <tmpro text="Lesser Devourer gains +1{shield} until it leaves play." fontsize="26" alignment="Center" flexibleheight="6.6"/>          
            </vlayout>
    </hlayout>
</vlayout>
					]],
                    health = 2,
                    isGuard = true
                }
            )
        }
    )
end

function demonologist_summon_demon_carddef()
    local cardLayout = createLayout({
        name = "Summon",
        art = "icons/The_Summoning",
        frame = "frames/necromancer_frames/necromancer_item_cardframe",
		xmlText=[[
		<vlayout>
    <hlayout flexibleheight="2">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="62"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="2">
                <tmpro text="&lt;size=130%&gt;{health_-1}
&lt;size=100%&gt;Randomly summon 1 of 3 demon tokens into play." fontsize="20" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Summoned demons have 1{shield}." fontsize="20" />
        </box>
    </hlayout>
</vlayout>
		]]
    })

 return createSkillDef({
        id = "demonologist_summon_skill",
        name = "Summon Demon",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/The_Summoning",
        abilities = {
            createAbility({
                id = "demonologist_summon_demon_ab",
                trigger = uiTrigger,
				check = minHealthCurrent(2),
                activations = singleActivation,
                layout = cardLayout,
                promptType = showPrompt,
                effect =pushChoiceEffectWithTitle(
                                {
                                    choices = {
                                        {
                                            effect = hitSelfEffect(1).seq(randomEffect({
					valueItem(1, createCardEffect(demonologist_demonic_leech_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_succubus_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_fel_hound_carddef(), currentInPlayLoc))
})).seq(noUndoEffect()),
                                            layout = createLayout(
                {
                    name = "Demonic leech",
                    art = "art/T_wurm",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
					xmlText = [[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Deal 1 damage to opponent. 
Demonic Leech gains 1{shield} until it leaves play. " fontsize="18"/>

</box>
</hlayout>

<divider/>
<hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Explode: If this card has 6{shield} or more at the start of a turn, immediately deal 5 damage to opponent and sacrifice this card. " fontsize="16"/>
</box>
</hlayout>
</vlayout>
					]],
					health = 1,
                    isGuard = false
                }
            ),
                                            tags = {gainCombatTag}
                                        },
                                        
										{
                                           effect = hitSelfEffect(1).seq(randomEffect({
					valueItem(1, createCardEffect(demonologist_demonic_leech_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_succubus_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_fel_hound_carddef(), currentInPlayLoc))
})).seq(noUndoEffect()),
                                            layout = createLayout(
                {
                    name = "Fel hound",
                    art = "art/T_Strength_of_the_wolf",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <icon text="{combat_2}" fontsize="60"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 1,
                    isGuard = false
                }
            ),
                                            tags = {gainCombatTag}
                                        },
										
										{
                                            effect = hitSelfEffect(1).seq(randomEffect({
					valueItem(1, createCardEffect(demonologist_demonic_leech_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_succubus_carddef(), currentInPlayLoc)),
					valueItem(1, createCardEffect(demonologist_fel_hound_carddef(), currentInPlayLoc))
})).seq(noUndoEffect()),
                                            layout = createLayout(
                {
                    name = "Succubus",
                    art = "art/T_Banshee",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Give target champion -1{shield} permanently.
&lt;size=50%&gt;
&lt;size=70%&gt;(Cannot reduce below 1{shield}.)" fontsize="25"/>
</box>
</hlayout>
<box flexiblewidth="7">
            <tmpro text="" fontsize="18"/>
</box>
</vlayout>
					]],
                    health = 1,
                    isGuard = false
                }
            ),
                                                                                    }
                                    },
					upperTitle = "Summon one of these 3 demon tokens, randomly.",
					lowerTitle = "Click any card to proceed."
					}),
				cost = goldCost(2),
			}),
        },
		layout = createLayout(
                {
                    name = "Summon Demon",
                    art = "icons/The_Summoning",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="2">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="62"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="2">
                <tmpro text="&lt;size=130%&gt;{health_-1}
&lt;size=100%&gt;Randomly summon 1 of 3 demon tokens into play." fontsize="20" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Summoned demons have 1{shield}." fontsize="20" />
        </box>
    </hlayout>
</vlayout>
					]]
                }
            )
        
    })
end

function demonologist_demonic_leech_carddef()
    return createChampionDef(
        {
            id = "demonologist_demonic_leech",
            name = "Demonic leech",
			types = {minionType, championType, demonType, nostealType, tokenType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "demonic_leech_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = hitOpponentEffect(1)
								.seq((grantHealthTarget(1, { SlotExpireEnum.LeavesPlay }, nullEffect(), "shadow")).apply(selectSource()))
                    }
                ),
				createAbility(
                    {
                        id = "demonic_leech_explode",
                        trigger = startOfTurnTrigger,
                        cost = noCost,
                        activations = singleActivations,
                        effect = ifElseEffect(selectLoc(currentInPlayLoc).where(isCardSelf().And(getCardHealth().gte(5))).count().gte(1), 
							hitOpponentEffect(5).seq(sacrificeTarget().apply(selectSource())),
							nullEffect()), 
                    }),
					
				createAbility(
                    {
                        id = "demonic_leech_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )
            },
            layout = createLayout(
                {
                    name = "Demonic leech",
                    art = "art/T_wurm",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
					xmlText = [[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Deal 1 damage to opponent. 
Demonic Leech gains 1{shield} until it leaves play. " fontsize="18"/>

</box>
</hlayout>

<divider/>
<hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Explode: If this card has 6{shield} or more at the start of a turn, immediately deal 5 damage to opponent and sacrifice this card. " fontsize="16"/>
</box>
</hlayout>
</vlayout>
					]],
					health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function demonologist_fel_hound_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "demonologist_fel_hound",
            name = "Fel hound",
			types = {minionType, championType, demonType, nostealType, tokenType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "fel_hound_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(2)
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "fel_hound_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Fel hound",
                    art = "art/T_Strength_of_the_wolf",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <icon text="{combat_2}" fontsize="60"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function demonologist_succubus_carddef()
    return createChampionDef(
        {
            id = "demonologist_succubus",
            name = "Succubus",
			types = {minionType, championType, demonType, nostealType, tokenType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "succubus_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = pushTargetedEffect({
                                                desc = "Give target champion -1<sprite name=\"shield\"> permanently.",
                                                validTargets = oppStunnableSelector().where(isCardChampion().And(getCardHealth().gte(2))),
                                                min = 0,
                                                max = 1,
                                                targetEffect = (grantHealthTarget(-1, { SlotExpireEnum.never }, nullEffect(), "shadow")),
                                                }),
														
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "fel_hound_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Succubus",
                    art = "art/T_Banshee",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Give target champion -1{shield} permanently.
&lt;size=50%&gt;
&lt;size=70%&gt;(Cannot reduce below 1{shield}.)" fontsize="25"/>
</box>
</hlayout>
<box flexiblewidth="7">
            <tmpro text="" fontsize="18"/>
</box>
</vlayout>
					]],
                    health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function demonologist_summon_demon_master_carddef()
    local cardLayout = createLayout({
        name = "Summon Demon Master",
        art = "art/T_Angry_Skeleton",
        frame = "frames/necromancer_frames/necromancer_item_cardframe",
		xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="2">
            <tmpro text="{scrap}" fontsize="50"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Put the Demon
Master into play.
&lt;size=70%&gt;
(It has {combat_1} and 4{shield} and can prepare up to 2 other demon minions.)" fontsize="24" flexiblewidth="10" />
</box>
</hlayout>
</vlayout>
		]]
    })

    return createSkillDef({
        id = "demonologist_summon_demon_master_ability",
        name = "Summon Demon Master",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "art/T_Angry_Skeleton",
        abilities = {
            createAbility({
                id = "demonologist_summon_demon_master_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                layout = cardLayout,
                promptType = showPrompt,
                effect = createCardEffect(demonologist_demon_master_carddef(), currentInPlayLoc),
				cost = sacrificeSelfCost,
			}),
        },
		layout = createLayout(
                {
                    name = "Summon Demon Master",
                    art = "art/T_Angry_Skeleton",
                    frame = "frames/necromancer_frames/necromancer_item_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="2">
            <tmpro text="{scrap}" fontsize="50"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Put the Demon
Master into play.
&lt;size=70%&gt;
(It has {combat_1} and 4{shield} and can prepare up to 2 other demon minions.)" fontsize="24" flexiblewidth="10" />
</box>
</hlayout>
</vlayout>
					]]
                }
            )
        
    })
end

function demonologist_incubus_carddef()
    return createChampionDef(
        {
            id = "demonologist_incubus",
            name = "Incubus",
			types = {championType, demonType, minionType, nostealType},
            acquireCost = 0,
            health = 3,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "demonologist_incubus_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(2).seq(gainCombatEffect(getCounter("incubus")))
                    }
                ),
				
				createAbility(
                    {
                        id = "demonologist_incubus_main",
                        trigger = startOfTurnTrigger,
                        cost = noCost,
                        activations = multipleActivations,
                        effect = incrementCounterEffect("incubus", 1)
                    }
                ),
			
			createAbility(
                    {
                        id = "demonologist_incubus_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = multipleActivations,
                        effect = nullEffect()
					}	
                    
                )
            },
            layout = createLayout({
            name = "Incubus",
            art = "art/T_Lesser_Vampire",
            frame = "frames/necromancer_frames/necromancer_item_cardframe",
            xmlText = [[
			<vlayout>
    <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <icon text="{combat_2}" fontsize="50" flexiblewidth="10" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="3">
            <tmpro text="Incubus gains {combat_1} (permanently) at the start of each turn." fontsize="20" flexiblewidth="10" />
    </hlayout> 
</vlayout>
]],
					health = 3,
                    isGuard = false
        })
        }
    )
end

function demonologist_keeper_of_the_void_carddef()
    return createChampionDef(
        {
            id = "demonologist_keeper_of_the_void",
            name = "Keeper of the Void",
			types = {championType, demonType, minionType, nostealType},
            acquireCost = 0,
            health = 3,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "demonologist_keeper_of_the_void_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(2)
						.seq(grantHealthTarget(selectLoc(loc(currentPid, inPlayPloc)).where(isCardType("minion").And(isCardName("demonologist_keeper_of_the_void").invert())).count(), { SlotExpireEnum.startOfOwnerTurn }, nullEffect(), "Void Keeper").apply(selectSource())),
                    }
                ),
				
			createAbility(
                    {
                        id = "demonologist_keeper_of_the_void_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = multipleActivations,
                        effect = nullEffect()
					}	
                    
                )
            },
            layout = createLayout({
            name = "Keeper of the Void",
            art = "art/T_Giant_Knight",
            frame = "frames/necromancer_frames/necromancer_item_cardframe",
            xmlText = [[
			<vlayout>
    <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <icon text="{combat_2}" fontsize="50" flexiblewidth="10" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="3">
            <tmpro text="Keeper of the Void gains +1{shield} for each other demon minion in play until your next turn." fontsize="20" flexiblewidth="10" />
    </hlayout> 
</vlayout>
]],
					health = 3,
                    isGuard = true
        })
        }
    )
end

function demonologist_demon_master_carddef()
    return createChampionDef(
        {
            id = "demonologist_demon_master",
            name = "Demon Master",
			types = {championType, demonType, minionType, nostealType},
            acquireCost = 0,
            health = 4,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "demonologist_demon_master_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(1).seq(pushTargetedEffect({
                    desc = "Prepare up to 2 other demon minions in play.",
                    validTargets = selectLoc(currentInPlayLoc).where(isCardType(minionType).And(isCardName("demonologist_demon_master").invert())),
                    min = 0,
                    max = 2,
                    targetEffect = prepareTarget()
				
            }))
                    }
                ),
							createAbility(
                    {
                        id = "demonologist_demon_master_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = multipleActivations,
                        effect = nullEffect()
					}	
                    
                )
            },
            layout = createLayout({
            name = "Demon Master",
            art = "art/T_Angry_Skeleton",
            frame = "frames/necromancer_frames/necromancer_item_cardframe",
            xmlText = [[
			<vlayout>
    <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <icon text="{combat_1}" fontsize="50" flexiblewidth="10" />
    </hlayout>
      <hlayout flexibleheight="3">
            <tmpro text="Prepare up to 2 other demon minions." fontsize="20" flexiblewidth="10" />
    </hlayout> 
</vlayout>
]],
					health = 4,
                    isGuard = false
        })
        }
    )
end

-- Apothecary cards
function apothecary_mezzaluna_carddef()
    return createDef(
        {
            id = "apothecary_mezzaluna",
            name = "Mezzaluna",
            types = {noStealType, itemType},
            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "apothecary_mezzaluna",
                        layout = cardLayout,
                        effect = gainCombatEffect(2),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Mezzaluna",
                    art = "art/T_Spell_Components",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
					<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">
       <icon text="{combat_2}" fontsize="50"/>
    </hlayout>    
</vlayout>
					]],
                }
            )
        }
    )
end

function apothecary_apprentice_potion_maker_carddef()
    return createChampionDef(
        {
            id = "apothecary_apprentice_potion_maker",
            name = "Apprentice Potion Maker",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "apprentice_potion_maker_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainGoldEffect(1),
                                            layout = layoutCard(
                                                {
                                                    title = "Apprentice Potion Maker",
                                                    art = "art/T_Thief_Shadow_Mask",
                                                    xmlText=[[
													<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">
       <icon text="{gold_1}" fontsize="50"/>
    </hlayout>    
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainGold1Tag}
                                        },
                                        {
                                            effect = pushTargetedEffect({
												  desc="Move a potion from your discard to the top of your deck.",
												  min=0,
												  max=1,
												  validTargets= selectLoc(loc(currentPid, discardPloc)).where(isCardType("Elixir")),
												  targetEffect= moveTarget(currentDeckLoc),
												  tags = {}
}),
											
                                            layout = layoutCard(
                                                {
                                                    title = "Apprentice Potion Maker",
                                                    art = "art/T_Thief_Shadow_Mask",
                                                    xmlText=[[
													<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">
       <text text="Move a potion from  your discard to the top of your deck." fontsize="24"/>
    </hlayout>    
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        )
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Apprentice Potion Maker",
                    art = "art/T_Thief_Shadow_Mask",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="2">
        <tmpro text="{gold_1}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="OR
Move a potion from  your discard to the top of your deck." fontsize="22" />
    </box>
</vlayout>
]],
                    health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function apothecary_red_potion_carddef()
    return createDef({
        id="apothecary_red_potion",
        name="Red Potion",
        types={noStealType, itemType, elixirType},
        acquireCost=0,
		cardTypeLabel = "Item",
		playLocation = castPloc,
        abilities = {
            createAbility({
                id="apothecary_red_potion",
                trigger= autoTrigger,
                effect = gainCombatEffect(2)
            }),
			createAbility({
                id="apothecary_red_potion_combo",
                trigger= autoTrigger,
				prompt = showPrompt,
				cost = noCost,
				activations = singleActivations,
				check = selectLoc(loc(currentPid, castPloc)).where(isCardName("apothecary_yellow_potion")).count().gte(1),
                effect = oppDiscardEffect(1),
            })
        },
        layout = createLayout({
            name = "Red potion",
            art = "art/T_Elixir_of_strength",
            frame = "frames/Wizard_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="4">
        <tmpro text="{combat_2}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="If you have yellow potion in play, opponent discards a card." fontsize="22" />
    </box>
</vlayout>
			]]
        })
    })
	end

function apothecary_green_potion_carddef()
    return createDef({
        id="apothecary_green_potion",
        name="Green Potion",
        types={noStealType, itemType, elixirType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="apothecary_green_potion",
                trigger= autoTrigger,
                effect = gainHealthEffect(2)
            }),
			createAbility({
                id="apothecary_green_potion_combo",
				cost = noCost,
                trigger= uiTrigger,
				promptType = showPrompt,
					layout = createLayout({
					name = "Green Potion",
					art = "art/treasures/T_Green_Potions_Medium",
					frame = "frames/Wizard_CardFrame",
					xmlText=[[
					<vlayout>
    <box flexibleheight="4">
        <tmpro text="{health_2}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="If you have a red potion in play, draw a card." fontsize="22" />
    </box>
</vlayout>
]]
					}),
				activations = singleActivations,
				check = selectLoc(loc(currentPid, castPloc)).where(isCardName("apothecary_red_potion")).count().gte(1),
                effect = drawCardsEffect(1),
            })
        },
        layout = createLayout({
            name = "Green Potion",
            art = "art/treasures/T_Green_Potions_Medium",
            frame = "frames/Wizard_CardFrame",
            xmlText=[[
			<vlayout>
    <box flexibleheight="4">
        <tmpro text="{health_2}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="If you have a red potion in play, draw a card." fontsize="22" />
    </box>
</vlayout>
			]]
        })
    })
	end

function apothecary_yellow_potion_carddef()
    return createDef({
        id="apothecary_yellow_potion",
        name="Yellow Potion",
        types={noStealType, itemType, elixirType},
        acquireCost=0,
		cardTypeLabel = "Item",
		playLocation = castPloc,
        abilities = {
            createAbility({
                id="apothecary_yellow_potion",
                trigger= autoTrigger,
                effect = gainGoldEffect(2)
            }),
			createAbility({
                id="apothecary_yellow_potion_combo",
                trigger= autoTrigger,
				prompt = showPrompt,
				layout = layoutCard({
					name = "yellow Potion",
					art = "art/T_Elixir_of_fortune",
					frame = "frames/Wizard_CardFrame",
					xmlText=[[
					<vlayout>
    <box flexibleheight="4">
        <tmpro text="{gold_2}" fontsize="42"/>
    </box>
    <box flexibleheight="4">
        <tmpro text="If you have a green potion in play, gain 2 Toughness." fontsize="22" />
    </box>
</vlayout>
]]
							}),
				cost = noCost,
				activations = singleActivations,
				check = selectLoc(loc(currentPid, castPloc)).where(isCardName("apothecary_green_potion")).count().gte(1),
                effect = gainToughnessEffect(2),

            })
        },
        layout = createLayout({
            name = "yellow Potion",
            art = "art/T_Elixir_of_fortune",
            frame = "frames/Wizard_CardFrame",
            xmlText=[[
					<vlayout>
    <box flexibleheight="4">
        <tmpro text="{gold_2}" fontsize="42"/>
    </box>
    <box flexibleheight="4">
        <tmpro text="If you have a green potion in play, gain 2 Toughness." fontsize="22" />
    </box>
</vlayout>
]]
        })
    })
	end

function apothecary_custom_brew_carddef()
	return createHeroAbilityDef({
		id = "custom_brew",
		name = "Custom Brew",
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "custom_brewActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Custom Brew",
					art = "art/T_Elixir_of_concentration",
					frame = "frames/Wizard_CardFrame",
					xmlText = [[	
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="36"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="{combat_5}&lt;size=60%&gt; OR &lt;/size&gt;{health_6}&lt;size=60%&gt;
OR
Draw 1 and opponent discards 1." fontsize="40" />
        </box>
    </hlayout>
</vlayout>
					]]					
				}),
				effect =
				pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainCombatEffect(5),
                                            layout = layoutCard(
                                                {
                                                    title = "Custom Brew",
                                                    art = "art/T_Elixir_of_concentration",
													frame = "frames/Wizard_CardFrame",
                                                    xmlText = [[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="{combat_5}&lt;size=60%&gt;" fontsize="46" />
        </box>
    </hlayout>
</vlayout>
]]
                                                }
                                            ),
                                            tags = {gainCombat6Tag}
                                        },
										{
                                            effect = gainHealthEffect(6),
                                            layout = layoutCard(
                                                {
                                                    title = "Custom Brew",
                                                    art = "art/T_Elixir_of_concentration",
													frame = "frames/Wizard_CardFrame",
                                                    xmlText = [[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="{health_6}&lt;size=60%&gt;" fontsize="46" />
        </box>
    </hlayout>
</vlayout>
]]
                                                }
                                            ),
                                            tags = {gainHealthTag}
                                        },
                                        {
                                            effect = drawCardsEffect(1).seq(oppDiscardEffect(1)),
                                            layout = layoutCard(
                                                {
                                                    title = "Custom Brew",
                                                    art = "art/T_Elixir_of_concentration",
													frame = "frames/Wizard_CardFrame",
                                                    xmlText = [[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Draw 1.
Opponent discards 1." fontsize="28" />
        </box>
    </hlayout>
</vlayout>
]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
				cost = sacrificeSelfCost
			})
		},
        layout = createLayout({
            name = "Custom Brew",	
            art = "art/T_Elixir_of_concentration",
			frame = "frames/Wizard_CardFrame",
            text = "<sprite name=\"combat_5\"> or <sprite name=\"health_6\">  or Draw 1 and opponent discards 1."
        }),
        layoutPath  = "art/T_Elixir_of_concentration",
	})
end	

function apothecary_restorative_draught_carddef()
    local cardLayout = createLayout({
        name = "Restorative Draught",
        art = "art/treasures/T_ranger_elixir_yellow",
        frame = "frames/Wizard_CardFrame",
		xmlText = [[
		<vlayout>
			<hlayout flexibleheight="1">
				<box flexiblewidth="1">
					<tmpro text="{expend_2}" fontsize="72"/>
				</box>
				<box flexiblewidth="7">
					<tmpro text="Put a champion or action of cost {gold_3} or less from your discard on top of your deck." fontsize="22" />
				</box>
			</hlayout>
		</vlayout>
		]]
    })

    return createSkillDef({
        id = "apothecary_restorative_draught_skill",
        name = "Restorative Draught",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "art/treasures/T_ranger_elixir_yellow",
        abilities = {
            createAbility({
                id = "apothecary_restorative_draught_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                layout = cardLayout,
				promptType = showPrompt,
                effect = pushTargetedEffect({
												  desc="Put a champion or action of cost 3g or less from your discard on top of your deck.",
												  min=0,
												  max=1,
												  validTargets= selectLoc(loc(currentPid, discardPloc)).where((isCardAction().Or(isCardChampion())).And(getCardCost().lte(3))),
												  targetEffect= moveTarget(currentDeckLoc),
												  tags = {}
												}),
                cost = goldCost(2),
            }),
        }
        
    })
end


-- Cryomancer cards
function cryomancer_ice_burst_carddef()
    return createDef(
        {
            id = "cryomancer_ice_burst",
            name = "Ice Burst",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "cryomancer_ice_burst",
                        layout = cardLayout,
                        effect = gainCombatEffect(2),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Ice Burst",
                    art = "art/T_Flame_Burst",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="7">
        <tmpro text="{combat_2}" fontsize="42"/>
    </box>
<divider/>
    <box flexibleheight="3">
        <tmpro text="'Have an ice day.'" fontsize="20" fontstyle="italic"/>
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function cryomancer_ice_shield_carddef()
    return createDef(
        {
            id = "cryomancer_ice_shield",
            name = "Ice Shield",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "cryomancer_ice_shield",
                        layout = cardLayout,
                        effect = ifElseEffect(selectLoc(loc(currentPid, castPloc)).where(isCardAction()).count().gte(3), gainToughnessEffect(2).seq(gainCombatEffect(2)), gainToughnessEffect(2)),
                        trigger = autoTrigger,
                        tags = {}
                    }
                ),
				
            },
            layout = createLayout(
                {
                    name = "Ice Shield",
                    art = "art/T_Glittering_Spray",
                    frame = "frames/Wizard_CardFrame",
                    xmlText = [[
<vlayout forceheight="false" spacing="6">
<hlayout spacing="10">
<text text="Gain 2 Toughness." fontsize="28"/>   
</hlayout>    
<hlayout spacing="10">
<text text="If you have 2 other actions in play, also gain {combat_2}." fontsize="22"/>    
</hlayout>
</vlayout>]],
                }
            )
        }
    )
end

function cryomancer_ice_gem_carddef()
    return createDef(
        {
            id = "cryomancer_ice_gem",
            name = "Ice Gem",
            types = {gemType, noStealType, itemType},
            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
                createAbility(
                    {
                        id = "cryomancer_ice_gem",
                        layout = cardLayout,
                        effect =
                        pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainGoldEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Ice Gem",
                                                    art = "art/T_Wizard_Alchemist_S_Stone",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="{gold_2}&lt;size=60%&gt;" fontsize="46" />
        </box>
    </hlayout>
</vlayout>
]]
                                                }
                                            ),
                                            tags = {gainGold2Tag}
                                        },
                                        {
                                            effect = oppDiscardEffect(1),
                                            layout = layoutCard(
                                                {
                                                    title = "Ice Gem",
                                                    art = "art/T_Wizard_Alchemist_S_Stone",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Opponent discards a card." fontsize="26" />
        </box>
    </hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Ice Gem",
                    art = "art/T_Wizard_Alchemist_S_Stone",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{gold_2}" fontsize="42"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="OR
Opponent discards a card." fontsize="22" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function cryomancer_freeze_carddef()
    return createDef(
        {
            id = "cryomancer_freeze",
            name = "Freeze",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "cryomancer_freeze",
                        layout = cardLayout,
                        effect = pushTargetedEffect({
												desc = "Brrr. It's cold in here. (Expend a champion.)",
												validTargets = oppStunnableSelector(),
												min = 0,
												max = 1,
												targetEffect = expendTarget().seq(gainCombatEffect(1)),
												}),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Freeze",
                    art = "art/T_Wind_Tunnel",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="{combat_1}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="Expend a champion." fontsize="22" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function cryomancer_frostbiteskill_carddef()
    local cardLayout = createLayout({
        name = "Frostbite",
        art = "icons/wind_storm",
        frame = "frames/Wizard_CardFrame",
        xmlText = 
		[[
		<vlayout>
    <hlayout flexibleheight="2">
            <icon text="{expend_2}" fontsize="72" flexiblewidth="0"/>
            <tmpro text="Add a frostbite card to opponent's discard." fontsize="20" flexiblewidth="10" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="2">
            <tmpro text="Frostbite card: {scrap} {health_-1}" fontsize="20" flexiblewidth="10" />
    </hlayout> 
</vlayout>
		]]
    })

    return createSkillDef({
        id = "cryomancer_frostbiteskill_skill",
        name = "Frostbite",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/wind_storm",
        abilities = {
            createAbility({
                id = "cryomancer_frostbiteskill_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                layout = cardLayout,
				promptType = showPrompt,
                effect = createCardEffect(cryomancer_frostbite_carddef(), loc(oppPid, discardPloc)),
				cost = goldCost(2),
            }),
        }
        
    })
end

function cryomancer_frostbite_carddef()
-- Frostbite CARD v1.03
    return createDef(
        {
            id = "cryomancer_frostbite",
            name = "Frostbite",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
			playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "cryomancer_frostbite",
                        layout = cardLayout,
                        effect = hitSelfEffect(1),
						cost = sacrificeSelfCost,
                        trigger = autoTrigger,
						playAllType = noPlayPlayType,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Frostbite",
                    art = "icons/wind_storm",
                    frame = "frames/Wizard_CardFrame",
                    xmlText = [[
<vlayout forceheight="false" spacing="6">
<hlayout spacing="10">
<icon text="{scrap}" fontsize="60"/>
<icon text="{health_-1}" fontsize="60"/>
</hlayout>
</vlayout>
]],
                }
            )
        }
    )
end
 
function cryomancer_blizzard_carddef()
	return createHeroAbilityDef({
		id = "blizzard",
		name = "Blizzard",
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "blizzardActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Blizzard",
					art = "art/T_heavy_gust",
					frame = "frames/Wizard_CardFrame",
					xmlText = [[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="2">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Draw 2. 
Deal 3 damage to ALL champions, including your own.
(Your champions will not heal at the end of this turn.)" fontsize="20"/> 
</box>
</hlayout>
</vlayout>
]]
				}),
				effect = drawCardsEffect(2).seq(damageTarget(3).apply(selectLoc(loc(currentPid, inPlayPloc)).union(selectLoc(loc(oppPid, inPlayPloc))).where(isCardChampion()))),
				cost = sacrificeSelfCost
			})
		},
        layout = createLayout({
            name = "Blizzard",	
            art = "art/T_heavy_gust",
            xmlText = [[
			<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="2">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Draw 2. 
Deal 3 damage to ALL champions, including your own.
(Your champions will not heal at the end of this turn.)" fontsize="20"/> 
</box>
</hlayout>
</vlayout>
			]]
        }),
        layoutPath  = "icons/wizard_serene_channel",
	})
end	


-- Pyromancer cards
function pyromancer_combust_carddef()
    return createDef(
        {
            id = "Pyromancer_Combust",
            name = "combust",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id="Pyromancer_Combust_combat",
						trigger= autoTrigger,
						effect = gainCombatEffect(1)
                    }),
			createAbility({
                id="Pyromancer_Combust_FGsac",
                trigger= autoTrigger,
				activations = singleActivations,
				check = selectLoc(loc(currentPid, castPloc)).union(selectLoc(loc(currentPid, discardPloc))).where(isCardName("fire_gem")).count().gte(1),
                effect = gainCombatEffect(2)

            })
            },
            layout = createLayout(
                {
                    name = "Combust",
                    art = "art/T_Spark",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{combat_1}" fontsize="42"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="+{combat_2} if you have a Fire Gem in play or in your discard pile." fontsize="24" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function pyromancer_sear_carddef()
    return createDef(
        {
            id = "Pyromancer_Sear",
            name = "sear",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "Pyromancer_Sear",
                        layout = cardLayout,
                        effect = gainCombatEffect(2),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Sear",
                    art = "art/T_Fire_Blast",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<icon text="{combat_2}" fontsize="70"/>
</hlayout>
</vlayout>
					]],
                }
            )
        }
    )
end

function pyromancer_scorch_carddef()
    return createDef(
        {
            id = "Pyromancer_Scorch",
            name = "Scorch",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "Pyromancer_Scorch",
                        layout = cardLayout,
                        effect = gainCombatEffect(1).seq(damageTarget(1).apply(selectLoc(loc(oppPid, inPlayPloc)))),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Scorch",
                    art = "art/T_Pillar_Of_Fire",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{combat_1}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="Deal 1 damage to all opposing champions." fontsize="24" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function pyromancer_fire_shard_carddef()
    return createDef(
        {
            id = "pyromancer_fire_shard",
            name = "Fire Shard",
            types = {gemType, noStealType, itemType},
            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
                createAbility(
                    {
                        id = "pyromancer_fire_shard",
                        layout = cardLayout,
                        effect =
                        pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainGoldEffect(1),
                                            layout = layoutCard(
                                                {
                                                    title = "Fire Shard",
                                                    art = "art/treasures/T_Sharpened_ruby",
                                                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<icon text="{gold_1}" fontsize="70"/>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainGold1Tag}
                                        },
                                        {
                                            effect = createCardEffect(fire_gem_carddef(), currentDiscardLoc),
                                            layout = layoutCard(
                                                {
                                                    title = "Shadow Gem",
                                                    art = "art/treasures/T_Sharpened_ruby",
                                                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<text text="Acquire a Fire Gem for free." fontsize="30"/>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Fire Shard",
                    art = "art/treasures/T_Sharpened_ruby",
                    frame = "frames/Wizard_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{gold_1}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="OR
Acquire a Fire Gem for free." fontsize="26" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function pyromancer_conflagration_1p_carddef()
	return createHeroAbilityDef({
		id = "conflagration_1p",
		name = "Conflagration",
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "conflagration_1pActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Conflagration",
					art = "icons/growing_flame",
					xmlText = [[<vlayout forceheight="false" spacing="6">
							<hlayout forcewidth="true" spacing="10">
								<icon text="{scrap}" fontsize="40"/>
								<vlayout  forceheight="false">
							<icon text="{combat_5}" fontsize="30"/>
							<text text="Also gain any additional {combat} generated by your Fuel skill since the start of the game. Then replace Fuel with After Burn ({combat_1}{health_1})." fontsize="18"/>
								</vlayout>
							</hlayout>
						</vlayout>
							]]
				}),
				effect = gainCombatEffect(5).seq(gainCombatEffect(getCounter("conflagration_1p")))
				.seq(sacrificeTarget().apply(selectLoc(loc(currentPid, skillsPloc)).where(isCardName("pyromancer_fuel_1_skill").Or(isCardName("pyromancer_fuel_2_skill")).Or(isCardName("pyromancer_fuel_3_skill")).Or(isCardName("pyromancer_fuel_4_skill")).Or(isCardName("pyromancer_fuel_5_skill")))))
				.seq(createCardEffect(pyromancer_after_burn_carddef(), currentSkillsLoc)),
				cost = sacrificeSelfCost
			}),
		},
        layout = createLayout({
            name = "Conflagration",	
            art = "icons/growing_flame",
            xmlText = [[<vlayout forceheight="false" spacing="6">
    <hlayout forcewidth="true" spacing="10">
        <icon text="{scrap}" fontsize="40"/>
        <vlayout  forceheight="false">
	<icon text="{combat_5}" fontsize="30"/>
	<text text="Also gain any additional {combat} generated by your Fuel skill since the start of the game. Then replace Fuel with After Burn ({combat_1}{health_1})." fontsize="18"/>
        </vlayout>
    </hlayout>
</vlayout>
]]
        }),
        layoutPath  = "icons/fire_bomb",
	})
end	
 

function pyromancer_fuel_1carddef()
    local cardLayout = createLayout({
        name = "Fuel",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add {combat_1} to your Conflagration ability. Then increase the value of this skill by {combat_1} (up to a maximum of {combat_5})." fontsize="22" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_fuel_1_skill",
        name = "Fuel",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "pyromancer_fuel_1_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = incrementCounterEffect("conflagration_1p", 1).seq(waitForClickEffect("Conflagration Total = 6"))
				.seq(transformTarget("pyromancer_fuel_2_skill").apply(selectSource())),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                }),
            }),
        }
        
    })
end

function pyromancer_fuel_2carddef()
    local cardLayout = createLayout({
        name = "Fuel",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add {combat_2} to your Conflagration ability. Then increase the value of this skill by {combat_1} (up to a maximum of {combat_5})." fontsize="22" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_fuel_2_skill",
        name = "Fuel",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "pyromancer_fuel_2_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = incrementCounterEffect("conflagration_1p", 2).seq(waitForClickEffect("Conflagration Total = 8"))
				.seq(transformTarget("pyromancer_fuel_3_skill").apply(selectSource())),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                }),
            }),
        }
        
    })
end

function pyromancer_fuel_3carddef()
    local cardLayout = createLayout({
        name = "Fuel",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add {combat_3} to your Conflagration ability. Then increase the value of this skill by {combat_1} (up to a maximum of {combat_5})." fontsize="22" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_fuel_3_skill",
        name = "Fuel",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "pyromancer_fuel_3_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = incrementCounterEffect("conflagration_1p", 3).seq(waitForClickEffect("Conflagration Total = 11"))
				.seq(transformTarget("pyromancer_fuel_4_skill").apply(selectSource())),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                }),
            }),
        }
        
    })
end

function pyromancer_fuel_4carddef()
    local cardLayout = createLayout({
        name = "Fuel",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add {combat_4} to your Conflagration ability. Then increase the value of this skill by {combat_1} (up to a maximum of {combat_5})." fontsize="22" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_fuel_4_skill",
        name = "Fuel",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "pyromancer_fuel_4_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = incrementCounterEffect("conflagration_1p", 4).seq(waitForClickEffect("Conflagration Total = 15"))
				.seq(transformTarget("pyromancer_fuel_5_skill").apply(selectSource())),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                }),
            }),
        }
        
    })
end

function pyromancer_fuel_5carddef()
    local cardLayout = createLayout({
        name = "Fuel",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add {combat_5} to your Conflagration ability." fontsize="22" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_fuel_5_skill",
        name = "Fuel",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "pyromancer_fuel_5_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = incrementCounterEffect("conflagration_1p", 5).seq(waitForClickEffect("+5 to Conflagration")),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                }),
            }),
        }
        
    })
end

function pyromancer_after_burn_carddef()
    local cardLayout = createLayout({
        name = "After Burn",
        art = "icons/growing_flame",
        frame = "frames/Wizard_CardFrame",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="{combat_1} {health_1}" fontsize="52" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "pyromancer_after_burn_skill",
        name = "After Burn",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/growing_flame",
        abilities = {
            createAbility({
                id = "after_burn_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = gainCombatEffect(1).seq(gainHealthEffect(1)),
                cost = goldCost(2)
            }),
        }
        
    })
end


-- Terramancer cards

function terramancer_earth_gem_carddef()

    return createDef(
        {
            id = "terramancer_earth_gem",
            name = "Earth Gem",
            types = {gemType, noStealType, itemType},
			            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
				createAbility(
                    {
                        id = "terramancer_earth_gem_sac",
						cost = noCost,
						trigger = autoTrigger,
                        activations = singleActivations,
						                        effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainGoldEffect(1),
                                            layout = layoutCard(
                                                {
                                                    title = "Earth Gem",
                                                    art = "art/ancestry/shiny_rock",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <icon text="{gold_1}" fontsize="60"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainCombatTag}
                                        },
                                        {
                                            effect = transformTarget("terramancer_move_earth_skill_free").apply(selectLoc(currentSkillsLoc).where(isCardName("terramancer_move_earth_skill"))),
											layout = layoutCard(
                                                {
                                                    title = "Earth Gem",
                                                    art = "art/ancestry/shiny_rock",
                                                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="Your class skill is free this turn." fontsize="30" />
    </box>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Earth Gem",
                    art = "art/ancestry/shiny_rock",
                    frame = "frames/druid_frames/druid_item_cardframe",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="2">
        <tmpro text="{gold_1}" fontsize="42"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="OR
Your class skill is free this turn." fontsize="24" />
    </box>
</vlayout>
					]]
                }
            )
        }
    )
end

function terramancer_hurl_boulder_carddef()
    return createDef(
        {
            id = "terramancer_hurl_boulder",
            name = "Hurl Boulder",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "terramancer_hurl_boulder",
                        layout = cardLayout,
                        effect = ifElseEffect(selectLoc(currentSkillsLoc).where(isCardName("terramancer_move_earth_skill").Or(isCardName("terramancer_move_earth_skill_free")).And(isCardExpended())).count().gte(1),gainCombatEffect(4),gainCombatEffect(2)),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
			
            layout = createLayout(
                {
                    name = "Hurl Boulder",
                    art = "icons/wizard_calm_channel",
                    frame = "frames/druid_frames/druid_action_cardframe",
                    xmlText=[[
<vlayout>
    <hlayout flexibleheight="7">
            <tmpro text="{combat_2} &lt;size=70%&gt;Or
 &lt;size=70%&gt; If you have used your class skill this turn gain &lt;size=100%&gt;+{combat_2}. " fontsize="28" flexiblewidth="1" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="2">
                     <tmpro text="It's terra terror." fontsize="18" fontstyle="italic" flexiblewidth="8" />
    </hlayout>
</vlayout>
					]],
                }
            )
        }
    )
end

function terramancer_tremor_carddef()

    local tremorBuff = createGlobalBuff({
        id="tremor_buff",
        name = "Tremor",
        abilities = {
            createAbility({
                id="tremor_effect",
                trigger = startOfTurnTrigger,
                effect = pushTargetedEffect({
												  desc = "Put a card back in your deck, then shuffle your deck.",
												  min=1,
												  max=1,
												  validTargets = selectLoc(loc(currentPid, handPloc)),
												  targetEffect = moveTarget(loc(currentPid, deckPloc)).seq(shuffleEffect(loc(currentPid, deckPloc))).seq(sacrificeSelf())
												  })
				
            })
        },
		buffDetails = createBuffDetails({
					name = "Tremor",
                    art = "icons/wizard_channel",
					text = "Return a card to deck and shuffle."
							})
    })

    return createDef(
        {
            id = "terramancer_tremor",
            name = "Tremor",
            types = {noStealType, actionType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility({
                        id = "terramancer_tremor",
                        layout = cardLayout,
                        effect = gainCombatEffect(1).seq(createCardEffect(tremorBuff, loc(oppPid, buffsPloc))),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
			
            layout = createLayout(
                {
                    name = "Tremor",
                    art = "icons/wizard_channel",
                    frame = "frames/druid_frames/druid_action_cardframe",
                    xmlText=[[
<vlayout>
    <box flexibleheight="2">
        <tmpro text="{combat_1}
&lt;size=70%&gt;Opponent must return 1 card to their deck, then shuffles their deck." fontsize="30"/>
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function terramancer_clay_golem_carddef()
    return createChampionDef(
        {
            id = "terramancer_clay_golem",
            name = "Clay Golem",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "clay_golem_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(1)
						
                    }
					
                ),
				createAbility(
                    {
                        id = "clay_golem_healthbuff",
                        trigger = onPlayTrigger,
                        cost = noCost,
                        activations = singleActivations,
                        effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = nullEffect(),
                                            layout = layoutCard(
                                                {
                                                    title = "Clay Golem",
                                                    art = "art/T_stone_golem",
                                                    xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="40" flexiblewidth="2"/>
            <tmpro text="{combat_1}" fontsize="50" flexiblewidth="12" />
    </hlayout>
</vlayout>
]],
										health = 1,
										isGuard = false
                                                }
                                            ),
                                            tags = {}
                                        },
                                        {
                                            effect = grantHealthTarget(2, { SlotExpireEnum.LeavesPlay }, nullEffect(), "Golem. Golem.").apply(selectSource())
											.seq(incrementCounterEffect("wallofEarthCounter", -2))
													.seq(simpleMessageExpressionEffect(format("Wall of Earth has {0} counters.", {getCounter("wallofEarthCounter")}))),
                                            condition = getCounter("wallofEarthCounter").gte(2),
											layout = layoutCard(
                                                {
                                                    title = "Clay Golem",
                                                    art = "art/T_stone_golem",
                                                    xmlText=[[
<vlayout>
  <hlayout flexibleheight="1">
            <tmpro text="Remove 2 counters
from your class skill." fontsize="20"  flexiblewidth="10" />
    </hlayout> 
    <divider/>
   <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="30" flexiblewidth="2"/>
            <tmpro text="{combat_1}" fontsize="40" flexiblewidth="12" />
    </hlayout>
</vlayout>
													]],
										health = 3,
										isGuard = false
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        )
						
					}	
                    
                )
            },
            layout = createLayout(
                {
                    name = "Clay Golem",
                    art = "art/T_stone_golem",
                    frame = "frames/druid_frames/druid_action_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
            <tmpro text="{expend}" fontsize="30" flexiblewidth="2"/>
            <tmpro text="{combat_1}" fontsize="40" flexiblewidth="12" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="2">
            <tmpro text="When played you may remove 2 counters from your class skill to give Clay Golem +2{shield} until it leaves play." fontsize="20"  flexiblewidth="10" />
    </hlayout> 
</vlayout>
					]],
                    health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function terramancer_move_earth_carddef()
    local cardLayout = createLayout({
        name = "Move Earth",
        art = "art/T_Fissure",
        frame = "frames/druid_frames/druid_item_cardframe",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Add 2 counters to this card. Or
Remove all counters. Put a Wall token into play with {guard} equal to the number of counters removed and  {health} for half that number. " fontsize="18" />
        </box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "terramancer_move_earth_skill",
        name = "move_earth",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/wizard_serene_channel",
        abilities = {
            createAbility({
                id = "move_earth_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = incrementCounterEffect("wallofEarthCounter", 2)
											.seq(simpleMessageExpressionEffect(format("Wall of Earth has {0} counters.", {getCounter("wallofEarthCounter")}))),
                                            layout = layoutCard(
                                                {
                                                    title = "Wall of Earth",
                                                    art = "art/T_Fissure",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Add 2 counters
to this card." fontsize="30"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {}
                                        },
                                        {
                         --here --
						 effect = createCardEffect(terramancer_wall_of_earth_carddef(), currentInPlayLoc)
						 .seq(grantHealthTarget((getCounter("wallofEarthCounter")), { SlotExpireEnum.LeavesPlay }, nullEffect(), "Wall of earth").apply(selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion().And(isCardName("terramancer_wall_of_earth")))))
						 .seq(gainHealthEffect(divide(getCounter("wallofEarthCounter"), 2)))
						 .seq(resetCounterEffect("wallofEarthCounter")),
						 condition = getCounter("wallofEarthCounter").gte(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Wall of Earth",
                                                    art = "art/T_Fissure",
                                                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="Remove all counters.

Put a Wall token into play with {guard} equal to the number of counters removed.
Gain {health} equal to half that number." fontsize="20" />

    </box>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                cost = combineCosts({
                    expendCost,
                    goldCost(2)
                })
            }),
        }
        
    })
end

function terramancer_move_earth_free_carddef()
    local cardLayout = createLayout({
        name = "Move Earth",
        art = "art/T_Fissure",
        frame = "frames/druid_frames/druid_item_cardframe",
        xmlText = [[<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
			<box flexiblewidth="7">
				<tmpro text="Add 2 counters to this card. Or
	Remove all counters. Put a Wall token into play with {guard} equal to the number of counters removed and  {health} for half that number. " fontsize="18" />
			</box>
    </hlayout>
</vlayout>]]
    })

    return createSkillDef({
        id = "terramancer_move_earth_skill_free",
        name = "move_earth",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "icons/wizard_serene_channel",
        abilities = {
            createAbility({
                id = "move_earth_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = incrementCounterEffect("wallofEarthCounter", 2)
											.seq(simpleMessageExpressionEffect(format("Wall of Earth has {0} counters.", {getCounter("wallofEarthCounter")}))),
                                            layout = layoutCard(
                                                {
                                                    title = "Wall of Earth",
                                                    art = "art/T_Fissure",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <tmpro text="Add 2 counters
to this card." fontsize="30"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {}
                                        },
                                        {
                         --here --
						 effect = createCardEffect(terramancer_wall_of_earth_carddef(), currentInPlayLoc)
						 .seq(grantHealthTarget((getCounter("wallofEarthCounter")), { SlotExpireEnum.LeavesPlay }, nullEffect(), "Wall of earth").apply(selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion().And(isCardName("terramancer_wall_of_earth")))))
						 .seq(gainHealthEffect(divide(getCounter("wallofEarthCounter"), 2)))
						 .seq(resetCounterEffect("wallofEarthCounter")),
						 condition = getCounter("wallofEarthCounter").gte(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Wall of Earth",
                                                    art = "art/T_Fissure",
                                                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="Remove all counters.

Put a Wall token into play with {guard} equal to the number of counters removed.
Gain {health} equal to half that number." fontsize="20" />

    </box>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                cost = expendCost
            }),
			createAbility({
                id = "terramancer_extract_earth_free_sac",
                trigger = endOfTurnTrigger,
                activations = singleActivation,
                layout = cardLayout,
                effect =transformTarget("terramancer_move_earth_skill").apply(selectSource()),
				cost = noCost,
			}),
        }
        
    })
end

function terramancer_wall_of_earth_carddef()

   --[[ local wallOfEarthBuff = createGlobalBuff({
        id="wallOfEarth_buff",
        name = "Wall of Earth",
        abilities = {
            createAbility({
                id="wallOfEarth_effect",
                trigger = autoTrigger,
                effect = addSlotToTarget(createNoAttackSlot({ key = "WallOfEarthInPlay", expiry = { startOfOwnerTurnExpiry } })).apply(selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion().And(isCardName("terramancer_wall").invert())))
            })
        },
		buffDetails = createBuffDetails({
					name = "Wall of Earth",
                    art = "art/T_Fissure",
					text = "Champions cannot be targeted while Wall of Earth is in play."
							})
    })
]]
    return createChampionDef(
        {
            id = "terramancer_wall_of_earth",
            name = "Wall of Earth",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 0,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "wall_of_earth_main",
                        trigger = onPlayTrigger,
                        cost = noCost,
                        activations = singleActivations,
                        effect = nullEffect()
						
                    }
					
                ),
				createAbility(
                    {
                        id = "wall_of_earth_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
						}	
                    
                )
            },
            layout = createLayout(
                {
                    name = "Wall of Earth",
                    art = "art/T_Fissure",
                    frame = "frames/druid_frames/druid_action_cardframe",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="We can't go over it.
We can't go under it.
Oh no! We'll have to go through it." fontstyle="italic" fontsize="22"/>
</box>

    </hlayout>
</vlayout>
					]],
                    health = 0,
                    isGuard = true
                }
            )
        }
    )
end

function terramancer_swallowed_by_the_earth_def()

	 local abilityLayout = createLayout({
        name = "Swallowed by the Earth",
        art = "art/sets/Dungeons/dragged_below",
        frame = "frames/druid_frames/druid_item_cardframe",
		xmlText=[[
    <vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Sacrifice one champion target opponent has in play that costs {gold_4} or less. &lt;size=90%&gt;(Usable from your 5th turn.)
&lt;size=100%&gt;OR
{health_6} and Draw 1." fontsize="20" flexiblewidth="10" />
</box>
</hlayout>
</vlayout>
		]]
    })
    return createHeroAbilityDef({
		id = "sbte",
		name = "Swallowed by the Earth",
		acquireCost = 0,
		cardTypeLabel = "Ability",
		playLocation = skillsPloc,
		types = { abilityType },
        abilities = {
			createAbility({
				id = "sbte",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = abilityLayout,
				effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = pushTargetedEffect({
												  desc = "Sacrifice one champion of cost 4 gold or less that your opponent has in play.",
												  min=1,
												  max=1,
												  validTargets = selectLoc(loc(oppPid, inPlayPloc)).where((isCardChampion()).And(getCardCost().lte(4))),
												  targetEffect = sacrificeTarget()
												  }),
											condition = getTurnsPlayed(currentPid).gte(5),
                                            layout = layoutCard(
                                                {
                                                    title = "Swallowed by the Earth",
													art = "art/sets/Dungeons/dragged_below",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Sacrifice one champion target opponent has in play that costs {gold_4} or less. &lt;size=80%&gt;(Usable from your 5th turn.)
" fontsize="23" flexiblewidth="10" />
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainCombatTag}
                                        },
                                        {
                                            effect = gainHealthEffect(6).seq(drawCardsEffect(1)),
                                            layout = layoutCard(
                                                {
                                                    title = "Swallowed by the Earth",
													art = "art/sets/Dungeons/dragged_below",
                                                    xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="{health_6}
&lt;size=80%&gt;Draw 1" fontsize="40" flexiblewidth="10" />
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ),
						
				cost = sacrificeSelfCost
			})
		},
		layout = abilityLayout,
		layoutPath= "art/sets/Dungeons/dragged_below"
	})
end

-- Thandalorian cards
function thandarlorian_combat_shield_carddef()
    return createDef({
        id="thandarlorian_combat_shield",
        name="Combat Shield",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="thandarlorian_combat_shield",
                trigger= autoTrigger,
                effect = gainToughnessEffect(2)
            }),
			createAbility({
                id="thandarlorian_combat_shield_combo",
				cost = noCost,
                trigger= uiTrigger,
				promptType = showPrompt,
					layout = createLayout({
					name = "Combat Shield",
					art = "art/T_Cleric_Brightstar_Shield",
					frame = "frames/Coop_Campaign_CardFrame",
					xmlText = [[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="Gain 2 Toughness" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you have a champion in play, draw 1." fontsize="24" />
    </box>
</vlayout>]]
					}),
				activations = singleActivations,
				check = selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion()).count().gte(1),
                effect = drawCardsEffect(1),
            })
        },
        layout = createLayout({
            name = "Combat Shield",
            art = "art/T_Cleric_Brightstar_Shield",
            frame = "frames/Coop_Campaign_CardFrame",
            xmlText = [[<vlayout>
    <box flexibleheight="1">
        <tmpro text="Gain 2 Toughness" fontsize="26"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you have a champion in play, draw 1." fontsize="24" />
    </box>
</vlayout>]]
        })
    })
	end

function thandarlorian_coordinated_attack_carddef()
-- START Coordinated Attack CARD - v1.00
    return createDef({
        id="thandarlorian_coordinated_attack",
        name="Coordinated Attack",
        types={noStealType, itemType},
		cardTypeLabel = "Action",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="thandarlorian_coordinated_attack",
                trigger= autoTrigger,
                effect = gainCombatEffect(2)
            }),
			createAbility({
                id="thandarlorian_coordinated_attack_combo",
				cost = noCost,
                trigger= autoTrigger,
				promptType = showPrompt,
					layout = createLayout({
					name = "Coordinated Attack",
					art = "art/T_Rally_The_Troops",
					frame = "frames/Coop_Campaign_CardFrame",
					xmlText = [[<vlayout>
    <box flexibleheight="1">
        <tmpro text="{combat_2}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you have 2 champions in play, gain {combat_2} more and 1 Toughness." fontsize="24" />
    </box>
</vlayout>]]
					}),
				activations = singleActivations,
				check = selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion()).count().gte(2),
                effect = gainCombatEffect(2).seq(gainToughnessEffect(1)),
            })
        },
        layout = createLayout({
            name = "Coordinated Attack",
            art = "art/T_Rally_The_Troops",
            frame = "frames/Coop_Campaign_CardFrame",
            xmlText = [[<vlayout>
    <box flexibleheight="1">
        <tmpro text="{combat_2}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you have 2 champions in play, gain {combat_2} more and 1 Toughness." fontsize="24" />
    </box>
</vlayout>
							]]
        })
    })
	end

function thandarlorian_hand_ballista_carddef()
-- START Hand Ballista CARD - v1.00
    return createDef({
        id="thandarlorian_hand_ballista",
        name="Hand Ballista",
        types={noStealType, itemType, bowType, weaponType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="thandarlorian_hand_ballista",
                trigger= autoTrigger,
                effect = gainCombatEffect(1)
            })
        },
        layout = createLayout({
            name = "Hand Ballista",
            art = "art/T_Light_Crossbow",
            frame = "frames/Coop_Campaign_CardFrame",
            xmlText = [[
<vlayout forceheight="false" spacing="6">
<hlayout spacing="10">
<icon text="{combat_1}" fontsize="50"/>
</hlayout>
<divider/>
<hlayout forcewidth="true" spacing="10">
<text text="Ballista. Not blaster." fontsize="22" fontstyle="italic"/>
</hlayout>
</vlayout>
]]
        })
    })
	end

function thandarlorian_bounty_hunters_stone_of_seeking_carddef()
--[[ START Bounty Hunter's Stone of Seeking CARD - v1.00
]]
    return createDef({
        id="thandarlorian_bounty_hunters_stone_of_seeking",
        name="Bounty Hunter's Stone of Seeking",
        types={noStealType, itemType},
		cardTypeLabel = "Item",
		playLocation = castPloc,
        acquireCost=0,
        abilities = {
            createAbility({
                id="thandarlorian_bounty_hunters_stone_of_seeking",
                trigger= autoTrigger,
                effect = gainGoldEffect(1)
            }),
			createAbility({
                id="thandarlorian_bounty_hunters_stone_of_seeking_combo",
				cost = noCost,
                trigger= onStunGlobalTrigger,
				activations = singleActivations,
                effect = gainGoldEffect(1),
				layout = createLayout({
					name = "Bounty Hunter's Stone of Seeking",
					art = "art/T_Wizard_Alchemist_S_Stone",
					frame = "frames/Coop_Campaign_CardFrame",
					Text = [[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="{gold_1}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you stun a champion this turn, gain {gold_1} more." fontsize="24" />
    </box>
</vlayout>
]]
					}),
            })
        },
        layout = createLayout({
            name = "Bounty Hunter's Stone of Seeking",
            art = "art/T_Wizard_Alchemist_S_Stone",
            frame = "frames/Coop_Campaign_CardFrame",
            xmlText = [[
			<vlayout>
    <box flexibleheight="1">
        <tmpro text="{gold_1}" fontsize="50"/>
    </box>
    <box flexibleheight="1">
        <tmpro text="If you stun a champion this turn, gain {gold_1} more." fontsize="24" />
    </box>
</vlayout>
							]]
        })
    })
	end

function thandarlorian_bracer_blades_carddef()
	return createHeroAbilityDef({
		id = "bracer_blades",
		name = "Bracer Blades",
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "bracer_bladesActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Bracer Blades",
					art = "art/treasures/T_Bracers_Of_Brawn",
					xmlText = [[
<vlayout forceheight="false" spacing="6">
<hlayout forcewidth="true" spacing="10">
<text text="{scrap}" fontsize="40"/>
<vlayout  forceheight="false">
<icon text="{combat_2}" fontsize="40"/>
<text text="OR Hit a champion for 3 damage.
Make this choice 3 times." fontsize="24"/>
</vlayout>
</hlayout>
</vlayout>
					]]					
				}),
				effect =
				pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = pushTargetedEffect({
                                                desc = "Deal 3 damage to target champion.",
                                                validTargets = oppStunnableSelector(),
                                                min = 0,
                                                max = 1,
                                                targetEffect = damageTarget(3),
                                                }),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    text = "Deal 3 damage to target champion."
                                                }
                                            ),
                                            tags = {gainCombat6Tag}
                                        },
										{
                                            effect = gainCombatEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<icon text="{combat_2}" fontsize="70"/>
</hlayout>
</vlayout>
					]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        )
						.seq(pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = pushTargetedEffect({
                                                desc = "Deal 3 damage to target champion.",
                                                validTargets = oppStunnableSelector(),
                                                min = 0,
                                                max = 1,
                                                targetEffect = damageTarget(3),
                                                }),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    text = "Deal 3 damage to target champion."
                                                }
                                            ),
                                            tags = {gainCombat6Tag}
                                        },
										{
                                            effect = gainCombatEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<icon text="{combat_2}" fontsize="70"/>
</hlayout>
</vlayout>
					]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        ))
						.seq(pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = pushTargetedEffect({
                                                desc = "Deal 3 damage to target champion.",
                                                validTargets = oppStunnableSelector(),
                                                min = 0,
                                                max = 1,
                                                targetEffect = damageTarget(3),
                                                }),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    text = "Deal 3 damage to target champion."
                                                }
                                            ),
                                            tags = {gainCombat6Tag}
                                        },
										{
                                            effect = gainCombatEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Bracer Blades",
                                                    art = "art/treasures/T_Bracers_Of_Brawn",
                                                    xmlText=[[
<vlayout>
<hlayout flexiblewidth="1">
<icon text="{combat_2}" fontsize="70"/>
</hlayout>
</vlayout>
					]]
                                                }
                                            ),
                                                                                    }
                                    }
                                }
                        )),
				cost = sacrificeSelfCost
			})
		},
        layout = createLayout({
            name = "Bracer Blades",	
            art = "art/treasures/T_Bracers_Of_Brawn",
            xmlText = [[
					<vlayout forceheight="false" spacing="6">
<hlayout forcewidth="true" spacing="10">
<text text="{scrap}" fontsize="40"/>
<vlayout  forceheight="false">
<icon text="{combat_2}" fontsize="40"/>
<text text="OR Hit a champion for 3 damage.
Make this choice 3 times." fontsize="24"/>
</vlayout>
</hlayout>
</vlayout>
					]]	
        }),
        layoutPath  = "art/treasures/T_Bracers_Of_Brawn",
	})
end	

function thandarlorian_whipcord_carddef()
    local cardLayout = createLayout({
        name = "Whipcord",
        art = "art/T_Thief_Enchanted_Garrote",
        frame = "frames/Coop_Campaign_CardFrame",
		xmlText = [[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Move a champion of cost {gold_4} or less into your play area until end of turn. Champions moved this way will arrive in your play area expended. If you target an opponent's champion, return it to opponent's play area at end of turn and prepare it. If you target a champion from the market, return it to the top of the market deck at end of turn." fontsize="14"/>
</box>
</hlayout>
</vlayout>
		]]
    })

    return createSkillDef({
        id = "thandarlorian_whipcord_skill",
        name = "Whipcord",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "art/T_Thief_Enchanted_Garrote",
        abilities = {
            createAbility({
                id = "thandarlorian_whipcord_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                layout = cardLayout,
				promptType = showPrompt,
                effect = pushChoiceEffect(
                                {
                                    choices = {
										{
                                            effect = pushTargetedEffect({
												desc = "Expend target opponent's champion of cost 4 gold or less, then drag it into your play area. At end of turn, return it to opponent's play area. Prepare it..",
												validTargets = oppStunnableSelector().where(isCardChampion().And(getCardCost().lte(4))),
												min = 0,
												max = 1,
												targetEffect = addSlotToTarget(createAbilitySlot({
														ability = createAbility({
															id = "thandarlorian_whipcord_ability",
															effect = moveTargetWithLocAndPlayer(inPlayPloc, ownerPid).apply(selectSource()),
															trigger = oppStartOfTurnTrigger
														}),
														expiry = { startOfOwnerTurnExpiry }
													}))
													.seq(expendTarget()).seq(moveTarget(loc(currentPid, inPlayPloc))),
												}),
                                            layout = layoutCard(
                                                {
                                                    title = "Whipcord",
                                                    art = "art/T_Thief_Enchanted_Garrote",
                                                    xmlText = [[<vlayout>
																<hlayout flexibleheight="1">
																	<box flexiblewidth="1">
																		<tmpro text="Expend target opponent's champion of cost {gold_4} or less, then drag it into your play area. At end of turn, return it to opponent's play area. Prepare it." fontsize="18"/>
																	</box>
																</hlayout>
															</vlayout>]]
                                                }
                                            ),
                                            tags = {}
                                        },
                                        {
                                            effect = pushTargetedEffect({
												desc = "Drag champion of cost 4g or less from the Market into your play area. It will arrive expended. At end of turn, return it to the Market Deck. (Shuffle the deck.)",
												validTargets = selectLoc(centerRowLoc).where(isCardChampion().And(getCardCost().lte(4))),
												min = 0,
												max = 1,
												targetEffect = addSlotToTarget(createAbilitySlot({
														ability = createAbility({
															id = "thandarlorian_whipcord_ability",
															effect = moveTarget(tradeDeckLoc).apply(selectSource()),
															trigger = oppStartOfTurnTrigger
														}),
														expiry = { startOfOwnerTurnExpiry }
													}))
													.seq(expendTarget()).seq(moveTarget(loc(currentPid, inPlayPloc))),
												}),
                                            layout = layoutCard(
                                                {
                                                    title = "Whipcord",
                                                    art = "art/T_Thief_Enchanted_Garrote",
													xmlText = [[<vlayout>
																<hlayout flexibleheight="1">
																	<box flexiblewidth="1">
																		<tmpro text="Drag champion of cost {gold_4} or less from the Market into your play area. It will arrive expended. At end of turn, return it to the Market Deck." fontsize="18"/>
																	</box>
																</hlayout>
															</vlayout>]]
												}
                                            ),
                                                                                    }
                                    }
                                }
                        ),
                cost = goldCost(2),
            }),
        }
        
    })
end

function thandarlorian_dragon_shard_armour_carddef()
    local cardLayout = createLayout({
        name = "Dragon Shard Armour",
        art = "art/T_Fighter_Helm_Of_Fury_2",
        frame = "frames/Coop_Campaign_CardFrame",
		xmlText = [[
		<vlayout>
			<hlayout flexibleheight="1">
				<box flexiblewidth="1">
					<tmpro text="Each turn gain 2 Toughness" fontsize="22"/>
				</box>
			</hlayout>
		</vlayout>
		]]
    })

    return createSkillDef({
        id = "thandarlorian_dragon_shard_armour_skill",
        name = "Dragon Shard Armour",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "art/T_Fighter_Helm_Of_Fury_2",
        abilities = {
            createAbility({
                id = "thandarlorian_dragon_shard_armour_ab",
                trigger = startOfTurnTrigger,
                activations = singleActivation,
                layout = cardLayout,
				promptType = noPrompt,
                effect = gainToughnessEffect(2),
                cost = noCost,
            }),
        }
        
    })
end


-- Paladin cards
function paladin_warhammer_carddef()
    return createDef(
        {
            id = "paladin_warhammer",
            name = "Warhammer",
            types = {weaponType, noStealType, paladinType, itemType, meleeWeaponType, hammerType},
            acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
                createAbility(
                    {
                        id = "paladin_warhammer",
                        layout = cardLayout,
                        effect = ifElseEffect(selectLoc(currentCastLoc).where(isCardType(weaponType)).count().gte(2),
                        gainCombatEffect(2).seq(gainHealthEffect(2)),
                        pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = gainCombatEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Warhammer",
                                                    art = "art/T_Flesh_Ripper",
                                                    text = "Gain <sprite name=\"combat_2\">"
                                                }
                                            ),
                                            tags = {gainCombat2Tag}
                                        },
                                        {
                                            effect = gainHealthEffect(2),
                                            layout = layoutCard(
                                                {
                                                    title = "Warhammer",
                                                    art = "art/T_Flesh_Ripper",
                                                    text = "Gain <sprite name=\"health_2\">"
                                                }
                                            ),
                                            tags = {gainHealth2Tag}
                                        }
                                    }
                                }
                        )),
                        trigger = autoTrigger,
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Warhammer",
                    art = "art/T_Flesh_Ripper",
                    frame = "frames/Cleric_CardFrame",
                    text = "Gain <sprite name=\"combat_2\"> or Gain <sprite name=\"health_2\"> \n <size=50%>If you have played a weapon this turn, gain both.</size>",
                }
            )
        }
    )
end

function paladin_crusader_carddef()
    return createChampionDef(
        {
            id = "paladin_Crusader",
            name = "Crusader",
            acquireCost = 0,
            health = 2,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "Crusader_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = pushChoiceEffect(
                            {
                                choices = {
                                    {
                                        effect = gainGoldEffect(1),
                                        layout = layoutCard(
                                            {
                                                title = "Crusader",
                                                art = "avatars/man_at_arms",
                                                text = ("{1 gold}")
                                            }
                                        ),
                                        tags = {gainGoldTag}
                                    },
                                    {
                                        effect = gainHealthEffect(1),
                                        layout = layoutCard(
                                            {
                                                title = "Crusader",
                                                art = "avatars/man_at_arms",
                                                text = ("{1 health}")
                                            }
                                        ),
                                        tags = {gainHealthTag}
                                    }
                                }
                            }
                        )
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Crusader",
                    art = "avatars/man_at_arms",
                    frame = "frames/Cleric_CardFrame",
                    text = "<size=250%><pos=-5%><sprite name=\"expend\"></pos></size><size=175%><pos=25%><voffset=.2em><sprite name=\"gold_1\"> or <sprite name=\"health_1\"></size></voffset>",
                    health = 2,
                    isGuard = true
                }
            )
        }
    )
end

function paladin_prayer_carddef()
    local cardLayout = createLayout({
        name = "Prayer",
        art = "icons/wind_storm",
        frame = "frames/Cleric_CardFrame",
        text = "<size=400%><line-height=0%><voffset=-.25em> <pos=-75%><sprite name=\"expend_2\"></size><line-height=135%> \n <voffset=2em><size=120%><pos=10%>Gain <sprite name=\"health_3\">\n   Gain  <sprite name=\"combat_1\">"
    })

    return createSkillDef({
        id = "paladin_prayer_skill",
        name = "Prayer",
        types = { paladinType, skillType },
        layout = cardLayout,
        layoutPath = "icons/wind_storm",
        abilities = {
            createAbility({
                id = "paladin_prayer_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                layout = cardLayout,
                promptType = showPrompt,
                effect = gainHealthEffect(3).seq(gainCombatEffect(1)),
                cost = goldCost(2),
            }),
        }
        
    })
end

function paladin_sacred_oath_carddef()
	return createHeroAbilityDef({
		id = "sacred_oath",
		name = "Sacred Oath",
		types = { heroAbilityType },
        abilities = {
            createAbility( {
                id = "sacred_oath_ab",
                trigger = uiTrigger,
                activations = singleActivation,
                promptType = showPrompt,
                layout = createLayout ({
                    name = "Sacred Oath",
                    art = "art/T_Devotion",
                    frame = "frames/Cleric_CardFrame",
                    text = "<voffset=1em><space=-.5em><voffset=-1.3em><size=200%><sprite name=\"scrap\"></size></voffset><pos=30%> <voffset=1.0em><line-height=40><space=-3.0em><space=1.5em>Prepare up to\n<space=1.5em>3 champions\n<space=1.5em>in play.</voffset></voffset>"
                    }),
                effect = pushTargetedEffect({
                    desc = "Choose up to 3 champions in play. Prepare those champions",
                    validTargets = s.CurrentPlayer(CardLocEnum.InPlay).where(isCardChampion()),
                    min = 1,
                    max = 3,
                    targetEffect = prepareTarget(),
			    }),
                cost = sacrificeSelfCost,
            }),
        },
        layout = createLayout({
            name = "Sacred Oath",
            art = "art/T_Devotion",
            text = "<voffset=1em><space=-.5em><voffset=-1.3em><size=200%><sprite name=\"scrap\"></size></voffset><pos=30%> <voffset=1.0em><line-height=40><space=-3.0em><space=1.5em>Prepare up to\n<space=1.5em>3 champions\n<space=1.5em>in play.</voffset></voffset>"
        }),
        layoutPath  = "art/T_Devotion",
	})
end	


-- Witch cards
function siphon_life_def()
	return createSkillDef({
		id = "siphon_life",
		name = "Siphon Life",
		cardTypeLabel = "Skill",
		types = { skillType },
        abilities = {
			createAbility({
				id = "siphonLifeActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Siphon Life",
					art = "art/T_Life_Force",
					frame = "frames/Wizard_CardFrame",
					xmlText = [[<hlayout>
							<icon text="{expend_2}" fontsize="80" flexibleheight="2"/>
							<vlayout>
								<icon text="Steal 1 current and maximum {health} from your opponent." fontsize="20" flexibleheight="2"/>
							</vlayout>
						</hlayout>]]
				}),
				effect = gainMaxHealthEffect(currentPid, 1).seq(gainHealthEffect(1)).seq(hitOpponentEffect(1)).seq(gainMaxHealthEffect(oppPid, -1)),
				cost = goldCost(2)
			})
		},
		layout = createLayout({
			name = "Siphon Life",
			art = "art/T_Life_Force",
			frame = "frames/Wizard_CardFrame",
			xmlText = [[<hlayout>
					<icon text="{expend_2}" fontsize="80" flexibleheight="2"/>
					<vlayout>
						<icon text="Steal 1 current and maximum {health} from your opponent." fontsize="20" flexibleheight="2"/>
					</vlayout>
				</hlayout>]]
		}),
		layoutPath = "art/T_Life_Force"
	})
end		

function piercing_screech_def()
	return createDef({
		id = "piercing_screech",
		name = "Piercing Screech",
		acquireCost = 0,
		cardTypeLabel = "Ability",
		playLocation = skillsPloc,
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "piercingScreechActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Piercing Screech",
					art = "art/T_Banshee",
					xmlText = [[
						<hlayout>
							<icon text="{scrap}" fontsize="60" flexibleheight="2"/>
							<vlayout>
								<icon text="Target opponent discards two cards." fontsize="24" flexibleheight="2"/>
							</vlayout>
						</hlayout>
					]]
			}),
				effect = oppDiscardEffect(2),
				cost = sacrificeSelfCost
			})
		},
		layout = createLayout({
			name = "Piercing Screech",
			art = "art/T_Banshee",
			xmlText = [[
				<hlayout>
					<icon text="{scrap}" fontsize="60" flexibleheight="2"/>
					<vlayout>
						<icon text="Target opponent discards two cards." fontsize="24" flexibleheight="2"/>
					</vlayout>
				</hlayout>
			]]
		}),
		layoutPath= "art/T_Banshee"
	})
end	

function witch_flash_freeze_carddef()
	local cardLayout = createLayout({
		name = "Flash Freeze",
		art = "icons/ranger_fast_track",
		frame = "frames/Wizard_CardFrame",
		text = "<size=180%><sprite name=\"combat_1\"><size=100%><br>Expend target champion."
	})
	
	return createActionDef({
		id = "witch_flash_freeze",
		name = "Flash Freeze",
		layout = cardLayout,
		abilities = {
			createAbility({
				id = "flashFreezeMain",
				trigger = autoTrigger,
				effect = gainCombatEffect(1).seq(pushTargetedEffect({
					desc = "Expend target Champion",
					min = 1,
					max = 1,
					validTargets = selectLoc(loc(oppPid, inPlayPloc)).where(isCardStunnable()).where(isCardExpended().invert()),
					targetEffect = expendTarget()
				}))
			})
		}
	})
end

	function witch_cauldron_carddef()
	local cardLayout = createLayout({
		name = "Witch's Cauldron",
		art = "art/T_Confused_Apparition",
		frame = "frames/Coop_Campaign_CardFrame",
		cardTypeLabel = "Item",
		xmlText = [[<vlayout>
				<icon text="{gold_1} {health_3}" fontsize="40" flexibleheight="2"/>
				<divider/>
				<icon text="You may stun a friendly champion. If you do, draw a card." fontsize="20" flexibleheight="2"/>
			</vlayout>]]
	})
	
	return createDef({
		id = "witch_cauldron",
		name = "Witch's Cauldron",
		acquireCost = 0,
		cardTypeLabel = "Item",
		types = { itemType },
		layout = cardLayout,
		playLocation = castPloc,
		abilities = {
			createAbility({
				id = "cauldronMain",
				trigger = autoTrigger,
				effect = gainGoldEffect(1).seq(gainHealthEffect(3))
			}),
			createAbility({
				id = "cauldronStun",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = cardLayout,
				effect = pushTargetedEffect({
					desc = "Stun a friendly champion.",
					min = 1,
					max = 1,
					validTargets = selectLoc(loc(currentPid, inPlayPloc)),
					targetEffect = stunTarget().seq(drawCardsEffect(1))
				}),
				check = selectLoc(currentInPlayLoc).count().gte(1)
			})
		}
	})
end


-- Shaman cards
function flame_burst_carddef()
    return createActionDef({
        id="flame_burst",
        name="Flame Burst",
        types={noStealType,actionType},
        acquireCost=0,
        abilities = {
            createAbility({
                id="flame_burst_auto",
                trigger= autoTrigger,
                effect = gainCombatEffect(2)
            })
        },
        layout = createLayout({
            name = "Flame Burst",
            art = "art/T_Spreading_Sparks",
            frame = "frames/Generic_CardFrame",
            xmlText = [[
                <vlayout>
                    <hlayout flexibleheight="1">
                        <box flexiblewidth="8">
                            <tmpro text="{combat_2}" fontsize="100"/>
                        </box>
                    </hlayout>
                </vlayout>
            ]]
        })
    })
end

function call_lightning_carddef()
    return createActionDef({
        id="call_lightning",
        name="Call Lightning",
        types={noStealType,actionType},
        acquireCost=0,
        playAllType={noPlayPlayType,blockPlayType},
        abilities = {
            createAbility(
                {
                    id="call_lightning_auto",
                    trigger= autoTrigger,
                    effect = gainCombatEffect(selectLoc(currentCastLoc).where(isCardAction()).count())
                }
            )
        },
        layout = createLayout({
            name = "Call Lightning",
            art = "icons/wizard_soul_channel",
            frame = "frames/Generic_CardFrame",
            xmlText = [[
                <vlayout>
                    <hlayout flexibleheight="1">
                        <box flexiblewidth="8">
                            <tmpro text="Gain {combat_1} for every action in play" fontsize="40" />
                        </box>
                    </hlayout>
                </vlayout>
            ]]
        })
    })
end

function natures_blessing_carddef()

    return createActionDef({
        id="natures_blessing",
        name="Natures Blessing",
        types={noStealType,actionType},
        acquireCost=0,
        abilities = {
            createAbility(
                {
                    id="natures_blessing_auto",
                    trigger= autoTrigger,
                    effect = gainGoldEffect(1).seq(healPlayerEffect(currentPid,1))
                }
            )
        },
        layout = createLayout({
            name = "Natures Blessing",
            art = "art/T_Nature_S_Bounty",
            frame = "frames/Generic_CardFrame",
            xmlText = [[
                <vlayout>
                    <hlayout flexibleheight="1">
                        <box flexiblewidth="8">
                            <tmpro text="{gold_1} {health_1}" fontsize="80" />
                        </box>
                    </hlayout>
                </vlayout>
            ]]
        })
    })
end

function gift_of_the_elements_carddef()

    local protectionLayout = layoutCard({
        name = "Protection",
        art = "art/T_Splashing_Wave",
        xmlText = [[
            <vlayout>
                <hlayout flexibleheight="1">
                    <box flexiblewidth="8">
                        <tmpro text="Gain {health}" fontsize="50" />
                    </box>
                </hlayout>
            </vlayout>
        ]]
    })

    local destructionLayout = layoutCard({
        name = "Destruction",
        art = "art/T_Spreading_Blaze",
        xmlText = [[
            <vlayout>
                <hlayout flexibleheight="1">
                    <box flexiblewidth="8">
                        <tmpro text="Gain {combat}" fontsize="50" />
                    </box>
                </hlayout>
            </vlayout>
        ]]
    })

    return createSkillDef({
        id="gift_of_the_elements",
        name="icons/wind_storm",
        cardTypeLabel = "Skill",
		types = { skillType },
        acquireCost = 2,
        abilities  = {
            createAbility({
                trigger = uiTrigger,
                id="gift_of_the_elements_trigger",
                cost = goldCost(2),
                effect = pushChoiceEffect({
					choices = {
						{
                            layout = destructionLayout,
                            effect= gainCombatEffect(selectLoc(currentCastLoc).where(isCardAction()).count()),
                            tags = {}
                        },
                        {
                            layout = protectionLayout,
                            effect = healPlayerEffect(currentPid, selectLoc(currentCastLoc).where(isCardAction()).count()),
                            tags = {}
                        }
                    }    
                })
            })
                
        },
        layout = createLayout({
            name = "Gift of the Elements",
            art = "icons/wind_storm",
            frame = "frames/Generic_CardFrame",
            xmlText = [[
                <vlayout>
                    <hlayout flexibleheight="1">
                        <box flexiblewidth="1">
                            <tmpro text="{expend_2}" fontsize="72" />
                        </box>
                        <box flexiblewidth="7">
                            <tmpro text="Gain {combat_1} or {health_1} for every action in play" fontsize="32" />
                        </box>
                    </hlayout>
                </vlayout>
            ]]
        }),
        layoutPath = "icons/wind_storm"
    })
end

function elemental_surge_def()
	return createDef({
		id = "elemental_surge_def",
		name = "Elemental Surge",
		acquireCost = 0,
		cardTypeLabel = "Ability",
		playLocation = skillsPloc,
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "elemental_surge_active",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Elemental Surge",
					art = "icons/growing_flame",
					xmlText = [[
                        <vlayout>
                            <hlayout flexibleheight="1">
                                <box flexiblewidth="8">
                                    <tmpro text="Gain {combat_1}, {health_1}, and {gold_1} for every action you have in play" fontsize="30" />
                                </box>
                            </hlayout>
                        </vlayout>
                    ]]
                }),
				effect = gainCombatEffect(selectLoc(currentCastLoc).where(isCardAction()).count()).seq(healPlayerEffect(currentPid, selectLoc(currentCastLoc).where(isCardAction()).count())).seq(gainGoldEffect(selectLoc(currentCastLoc).where(isCardAction()).count())),
				cost = sacrificeSelfCost
			})
		},
		layout = createLayout({
			name = "Elemental Surge",
			art = "icons/growing_flame",
			xmlText = [[
                <vlayout>
                    <hlayout flexibleheight="1">
                        <box flexiblewidth="8">
                            <tmpro text="Gain {combat_1}, {health_1}, and {gold_1} for every action you have in play" fontsize="30" />
                        </box>
                    </hlayout>
                </vlayout>
            ]]
        }),
		layoutPath= "icons/growing_flame"
	})
end	


-- King Midas cards
function midas_kings_adviser_carddef()
	return createChampionDef({
        id="midas_kings_adviser",
        name="Kings adviser",
        types={championType, priestType},
        acquireCost=1,
        health = 1,
        isGuard = false,
        abilities = {
			createAbility({
				id = "kingsAdviserMain",
				trigger = autoTrigger,
				effect = gainGoldEffect(1),
				cost = expendCost,
				activations = multipleActivations
			})
		},
        layout = createLayout({
			name = "Kings adviser",
			art = "art/T_Tithe_Priest",
			frame = "frames/Treasure_CardFrame",
			text = "<i>Lean into the power of “No” to fend off the distractions of shiny new objects.</i>",
			xmlText = [[<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">
       <icon text="{expend}" fontsize="50"/>
<icon text="{gold_1}" fontsize="50"/>
    </hlayout>    
    <divider/>
    <hlayout forcewidth="true" spacing="10">
        <vlayout  forceheight="false">
<text fontstyle="italic" text="Lean into the power of 'No' to fend off the distractions of shiny new objects." fontsize="16"/>
        </vlayout>
    </hlayout>
</vlayout>]],
			health = 1,
			cost = 1,
			isGuard = false
        })
    })
end


function midas_gold_carddef()
	return createItemDef({
        id = "midas_gold",
        name = "Gold",
        types = { itemType, currencyType, coinType },
        acquireCost = 0,
        abilities = {
            createAbility({
                id = "midasGoldMain",
                effect = gainGoldEffect(1),
                cost = noCost,
                trigger = autoTrigger
            })
        },
        layout = createLayout({
			name = "Gold",
			art = "art/gold_male_pale",
			frame = "frames/Treasure_CardFrame",
			xmlText = [[<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">

<icon text="{gold_1}" fontsize="50"/>

</hlayout>
    <divider/>
    <hlayout forcewidth="true" spacing="10">
        <vlayout  forceheight="false">
<text fontstyle="italic" text="Gold is forever. It is beautiful, useful, and never wears out." fontsize="16"/>
        </vlayout>
    </hlayout>
</vlayout>]],
        })
    })
end

function midas_liquid_gold_carddef()
	return createItemDef({
        id = "midas_liquid_gold",
        name = "Liquid gold",
        types = { itemType, currencyType, coinType },
        acquireCost = 0,
        abilities = {
            createAbility({
                id = "midasLiquidGoldMain",
                effect = gainGoldEffect(2),
                cost = noCost,
                trigger = autoTrigger
            })
        },
        layout = createLayout({
			name = "Liquid gold",
			art = "art/treasures/T_Cleric_Elixir_Golden",
			frame = "frames/Treasure_CardFrame",
			xmlText = [[<vlayout forceheight="false" spacing="6">
    <hlayout spacing="10">

<icon text="{gold_2}" fontsize="50"/>

</hlayout>
    <divider/>
    <hlayout forcewidth="true" spacing="10">
        <vlayout  forceheight="false">
<text fontstyle="italic" text="Wine has never tasted better." fontsize="16"/>
        </vlayout>
    </hlayout>
</vlayout>]],
        })
    })
end

function greed_is_good_skilldef()
	return createSkillDef({
		id = "greed_is_good",
		name = "Greed is Good",
		cardTypeLabel = "Skill",
		types = { skillType },
        abilities = {
			createAbility({
				id = "GreedIsGoodActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Greed is good",
					art = "art/T_Bribe",
					frame = "frames/Treasure_CardFrame",
					text = "",
					xmlText = [[<vlayout forceheight="false" spacing="6">
									<hlayout spacing="5">
									   <icon text="{expend}" fontsize="55"/>
									   <text text="-{health_1} permanent health to convert all gold you have in play into damage." fontsize="18"/>
									</hlayout> 
									<divider/>
									<hlayout forcewidth="true" spacing="10">
										<vlayout  forceheight="false">
											 <text fontstyle="italic" text="Where Gold speaks, every tongue is silent." fontsize="14"/>
										</vlayout>
									</hlayout>
								</vlayout>]]
				}),
				effect = gainCombatEffect(getPlayerGold(currentPid)).seq(gainGoldEffect(getPlayerGold(currentPid).multiply(-1))).seq(gainHealthEffect(-1)).seq(gainMaxHealthEffect(currentPid, -1)) ,
				cost = expendCost
			})
		},
		layout = createLayout({
			name = "Greed is good",
			art = "art/T_Bribe",
			frame = "frames/Treasure_CardFrame",
			text = "",
			xmlText = [[<vlayout forceheight="false" spacing="6">
							<hlayout spacing="5">
							   <icon text="{expend}" fontsize="55"/>
							   <text text="-{health_1} permanent health to convert all gold you have in play into damage." fontsize="18"/>
							</hlayout> 
							<divider/>
							<hlayout forcewidth="true" spacing="10">
								<vlayout  forceheight="false">
									 <text fontstyle="italic" text="Where Gold speaks, every tongue is silent." fontsize="14"/>
								</vlayout>
							</hlayout>
						</vlayout>]]
		}),
		layoutPath= "art/T_Bribe"
	})
end	

function golden_touch_abilitydef()
	return createDef({
		id = "golden_touch",
		name = "Golden touch",
		acquireCost = 0,
		cardTypeLabel = "Ability",
		playLocation = skillsPloc,
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "goldenTouchActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Golden touch",
					art = "art/T_Strength_In_Numbers",
					frame = "frames/Treasure_CardFrame",
					text = "",
					xmlText = [[
						<vlayout forceheight="false" spacing="6">
							<hlayout spacing="5">
								<icon text="{scrap}" fontsize="65"/>
								<text text="Sacrifice all champions you have in play and convert them back into gold." fontsize="20"/>
							</hlayout> 
						</vlayout>
					]]
				}),
				effect = gainGoldEffect(selectCurrentChampions().sum(getCardCost())).seq(sacrificeTarget().apply(selectCurrentChampions())),
				-- effect = sacrificeTarget().apply(selectCurrentChampions()),
				-- effect = sacrificeTarget().apply(selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion())),
				cost = sacrificeSelfCost
			})
		},
		layout = createLayout({
			name = "Golden touch",
			art = "art/T_Strength_In_Numbers",
			frame = "frames/Treasure_CardFrame",
			text = "",
			xmlText = [[
				<vlayout forceheight="false" spacing="6">
					<hlayout spacing="5">
						<icon text="{scrap}" fontsize="65"/>
						<text text="Sacrifice all champions you have in play and convert them back into gold." fontsize="20"/>
					</hlayout> 
				</vlayout>
			]]
		}),
		layoutPath= "art/T_Strength_In_Numbers"
	})
end	


-- Brewmaster cards
function brewmaster_mead_carddef()
    return createDef(
        {
            id = "brewmaster_mead",
            name = "Mead",
            types = {elixirType, noStealType, itemType},
			acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
				createAbility(
                    {
                        id = "brewmaster_mead",
                        PlayAllType = noPlayPlayType,
						cost = noCost,
						trigger = autoTrigger,
                        activations = singleActivations,
						effect = nullEffect(),
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Mead",
                    art = "art/treasures/T_Fighter_Elixir_Red",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="3">
        <tmpro text="Drink up!" fontsize="20" fontstyle="italic"/>
    </box>
</vlayout>
					]]
                }
            )
        }
    )
end 

function brewmaster_spilled_drink_carddef()
    return createDef(
        {
            id = "brewmaster_spilled_drink",
            name = "Spilled Drink",
            types = {elixirType, noStealType, itemType},
			acquireCost = 0,
            cardTypeLabel = "Item",
            playLocation = castPloc,
            abilities = {
				createAbility(
                    {
                        id = "brewmaster_spilled_drink",
                        PlayAllType = blockPlayType,
						cost = noCost,
						trigger = autoTrigger,
                        activations = singleActivations,
						effect = gainGoldEffect(1).seq(pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = nullEffect(),
                                            layout = layoutCard(
                                                {
                                                    name = "Spilled Drink",	
													art = "art/treasures/T_Ranger_Elixir_Yellow",
													frame = "frames/Generic_CardFrame",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <text text="Do nothing." fontsize="24"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainCombatTag}
                                        },
                                        {
                                            effect = forceDiscard(1).seq(drawCardsEffect(1)),
                                            layout = createLayout({
													name = "Spilled Drink",	
													art = "art/treasures/T_Ranger_Elixir_Yellow",
													frame = "frames/Generic_CardFrame",
													xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">

        <box flexiblewidth="7">
            <tmpro text="Discard a card,
then draw a card." fontsize="24" />
        </box>
    </hlayout>
</vlayout>
			]]
        }),
                                                                                    }
                                    }
                                }
                        )),
                        tags = {}
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Spilled Drink",
                    art = "art/treasures/T_Ranger_Elixir_Yellow",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="3">
        <tmpro text="{gold_1}" fontsize="50"/>
    </box>
<box flexibleheight="3">
        <tmpro text="You may discard a card. If you do, draw a card." fontsize="24"/>
    </box></vlayout>
					]]
                }
            )
        }
    )
end 

function brewmaster_tap_a_keg_carddef()
    return createDef(
        {
            id = "brewmaster_tap_a_keg",
            name = "Tap a Keg",
            types = {actionType, noStealType, brewmasterType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility(
                    {
                        id = "brewmaster_tap_a_keg_main",
                        layout = cardLayout,
                        effect = gainGoldEffect(1),
                        trigger = autoTrigger,
						playAllType = blockPlayType,
                        tags = {}
                    }
                ),
				createAbility(
                    {
                        id = "brewmaster_tap_a_keg_1",
                        layout = cardLayout,
                        effect = ifElseEffect(selectLoc(currentDiscardLoc).where(isCardName("brewmaster_mead")).count().gte(1),gainGoldEffect(1),nullEffect()),
                        trigger = autoTrigger,
						playAllType = blockPlayType,
                        tags = {}
                    }),
				createAbility(
                    {
                        id = "brewmaster_tap_a_keg_2",
                        layout = cardLayout,
                        effect = ifElseEffect(selectLoc(currentDiscardLoc).where(isCardName("brewmaster_mead")).count().gte(3),gainGoldEffect(1),nullEffect()),
                        trigger = autoTrigger,
						playAllType = blockPlayType,
                        tags = {}
                    })
                
            },
            layout = createLayout(
                {
                    name = "Tap a Keg",
                    art = "art/treasures/T_Ranger_Elixir_Orange",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
					<vlayout>
    <box flexibleheight="3">
        <tmpro text="{gold_1}" fontsize="30"/>
    </box>
    <box flexibleheight="3">
        <tmpro text="+{gold_1} if you have a Mead card in your discard pile.
+{gold_1} more if you have 3+ Mead cards in your discard pile." fontsize="20" />
    </box>
</vlayout>
					]],
                }
            )
        }
    )
end

function brewmaster_serve_the_strong_stuff_carddef()

    local priceBuff = getCostDiscountBuff("brewmaster_serve_the_strong_stuff_buff", -1, selectLoc(centerRowLoc).union(selectLoc(fireGemsLoc)))
    local buffCreator = createGlobalBuff({
        id="brewmaster_serve_the_strong_stuff_buff",
        name = "Serve the strong stuff",
        abilities = {
            createAbility({
                id="brewmaster_serve_the_strong_stuff_effect",
                trigger = endOfTurnTrigger,
                effect = createCardEffect(priceBuff, loc(oppPid, buffsPloc)).seq(sacrificeSelf())
            })
        },
		
    })
    return createDef(
        {
            id = "brewmaster_serve_the_strong_stuff",
            name = "Serve the strong stuff",
            types = {noStealType, itemType},
            acquireCost = 0,
            cardTypeLabel = "Action",
            playLocation = castPloc,
            abilities = {
                createAbility(
                    {
                        id = "brewmaster_serve_the_strong_stuff",
                        layout = cardLayout,
                        effect = pushTargetedEffect({
							desc = "Prepare a champion.",
							validTargets = s.CurrentPlayer(CardLocEnum.InPlay).where(isCardChampion()),
							min = 0,
							max = 1,
							targetEffect = prepareTarget(),
			    }),
                        trigger = uiTrigger,
                        tags = {}
                    }
					
                ),
				createAbility(
                    {
                        id = "brewmaster_serve_the_strong_buff",
                        layout = cardLayout,
                        effect = createCardEffect(buffCreator, loc(currentPid, buffsPloc)),
                        trigger = autoTrigger,
                        tags = {}
                    }
					
                )
            },
            
			createBuffDetails({
					art = "art/treasures/T_Bottle_Of_Rum",
					name = "Serve the strong stuff",
					text = "Your first purchase this turn costs +1 gold."
							}),
		
		layout = createLayout(
                {
                    name = "Serve the strong stuff",
                    art = "art/treasures/T_Bottle_Of_Rum",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
<vlayout>
    <box flexibleheight="1">
        <tmpro text="Opponent must pay +{gold_1} for their first purchase next turn.

Prepare a champion." fontsize="20"/>
</box>
</vlayout>
					]],
                }
            )
        }
    )
end

function brewmaster_regular_regulars_carddef()
    return createChampionDef(
        {
            id = "brewmaster_regular_regulars",
            name = "Regular Regulars",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 1,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "regular_regulars_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
						playAllType = blockPlayType,
                        effect = ifElseEffect(selectLoc(loc(currentPid, castPloc)).where(isCardName("brewmaster_mead")).count().gte(1), gainGoldEffect(2), gainGoldEffect(1)),
                    }
                ),
            },
            layout = createLayout(
                {
                    name = "Regular Regulars",
                    art = "avatars/cristov_s_recruits",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
<vlayout>
    <hlayout flexibleheight="3">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <vlayout flexiblewidth="4">
            <box flexibleheight="1">
                <tmpro text="{gold_1}" fontsize="40" />
            </box>
            <box flexibleheight="1">
                <tmpro text="+{gold_1} if you already have Mead in play." fontsize="24" />
            </box>
        </vlayout>
    </hlayout>
</vlayout>
]],
                    health = 1,
                    isGuard = false
                }
            )
        }
    )
end

function brewmaster_irregular_regulars_carddef()
    return createChampionDef(
        {
            id = "brewmaster_irregular_regulars",
            name = "Irregular Regulars",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 2,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "irregular_regulars_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
						playAllType = blockPlayType,
                        effect = ifElseEffect(selectLoc(loc(currentPid, castPloc)).where(isCardName("brewmaster_mead")).count().gte(1), gainGoldEffect(1).seq(gainCombatEffect(2)), gainGoldEffect(1)),
                    }
                ),
            },
            layout = createLayout(
                {
                    name = "Iregular Regulars",
                    art = "art/T_Orc_Riot",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[

<vlayout>
    <hlayout flexibleheight="3">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <vlayout flexiblewidth="4">
            <box flexibleheight="1">
                <tmpro text="{gold_1}" fontsize="40" />
            </box>
            <box flexibleheight="1">
                <tmpro text="+{combat_2} if you already have Mead in play." fontsize="24" />
            </box>
        </vlayout>
    </hlayout>
</vlayout>
]],
                    health = 2,
                    isGuard = false
                }
            )
        }
    )
end

function brewmaster_zaboozer_carddef()
    return createChampionDef(
        {
            id = "brewmaster_zaboozer",
            name = "Zaboozer, Heroic Regular",
			types = {championType, nostealType},
            acquireCost = 0,
            health = 2,
            isGuard = true,
            abilities = {
               	createAbility(
                    {
                        id = "zaboozer_mead",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
						playAllType = blockPlayType,
                        effect = ifElseEffect(selectLoc(loc(currentPid, castPloc)).where(isCardName("brewmaster_mead")).count().gte(1), gainCombatEffect(1).seq(addSlotToTarget(createGuardSwitchSlot(false, { endOfTurnExpiry })).apply(selectSource())), gainCombatEffect(3)),
                    }
                ),
            },
            layout = createLayout(
                {
                    name = "Zaboozer, Heroic Regular",
                    art = "art/T_Maurader",
                    frame = "frames/Generic_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="3">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <vlayout flexiblewidth="4">
            <box flexibleheight="1">
                <tmpro text="{combat_3} if no Mead in play." fontsize="20" />
            </box>
            <box flexibleheight="2">
                <tmpro text="If Mead is in play, only gain {combat_1} and lose Guard." fontsize="20" />
            </box>
        </vlayout>
    </hlayout>

<divider/>
            <box flexibleheight="1">
                <tmpro text="'Where's my drink?!'" fontsize="14" fontstyle="bold, italic"/>
            </box>
</vlayout>
]],
                    health = 2,
                    isGuard = true
                }
            )
        }
    )
end

function brewmaster_a_round_on_the_house_def()

    local cardLayout = createLayout({
        name = "A round on the House",
        art = "art/T_Unify_Apsara",
        frame = "frames/Generic_CardFrame",
        xmlText=[[
        <vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <icon text="{expend_2}" fontsize="72"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="+{combat_1} for every champion you have in play.

Then, ALL champions (yours and opponent's) get -1{shield} until they leave play." fontsize="18" />
        </box>
    </hlayout>
</vlayout>
        ]]
    })

    return createSkillDef({
        id = "brewmaster_a_round_on_the_house_skill",
        name = "A round on the House",
        types = { skillType },
        layout = cardLayout,
        layoutPath = "art/T_Unify_Apsara",
        abilities = {
            createAbility({
                id = "a_round_on_the_house_ab",
                trigger = uiTrigger,
				promptType = showPrompt,
                activations = singleActivation,
                layout = cardLayout,
                effect =  gainCombatEffect(selectLoc(currentInPlayLoc).where(isCardChampion()).count())
					.seq((grantHealthTarget(-1, { SlotExpireEnum.leavesPlay }, nullEffect(), "shadow")).apply(selectLoc(loc(currentPid, inPlayPloc)).where(isCardChampion())))
					.seq((grantHealthTarget(-1, { SlotExpireEnum.leavesPlay }, nullEffect(), "shadow")).apply(selectLoc(loc(oppPid, inPlayPloc)).where(isCardChampion()))),
                cost = goldCost(2)
            }),
        }
        
    })
end

    local thrownOutBarBuff = createGlobalBuff({
        id="brewmaster_serve_the_strong_stuff_buff",
        name = "Get out of my bar",
        abilities = {
            createAbility({
                id="brewmaster_get_out_of_my_bar_effect",
                trigger = deckShuffledTrigger,
                effect = moveToBottomDeckTarget(false, 0).apply(selectSavedTargets("Thrown out bar")).seq(sacrificeSelf())
            })
        }
    })

function brewmaster_get_out_of_my_bar_carddef()
	return createHeroAbilityDef({
		id = "get_out_of_my_bar_buff",
		name = "Get out of my bar",
		types = { heroAbilityType },
        abilities = {
			createAbility({
				id = "get_out_of_my_barActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = createLayout({
					name = "Get out of my bar",
					art = "art/T_orc",
					frame = "frames/Generic_CardFrame",
					xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Set aside a champion you stunned this turn. The next time your opponent shuffles their deck, put that champion on the bottom of their deck.

Or draw a card." fontsize="18" />
        </box>
    </hlayout>
</vlayout>
					]]
				}),
				effect = pushChoiceEffect(
                                {
                                    choices = {
                                        {
                                            effect = drawCardsEffect(1),
                                            layout = layoutCard(
                                                {
                                                    name = "Get out of my bar",	
													art = "art/T_orc",
													frame = "frames/Generic_CardFrame",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <text text="Draw a card." fontsize="24"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
                                            tags = {gainCombatTag}
                                        },
                                        {
                                            effect = pushTargetedEffect({
												  desc = "Sacrifice a champion from opponent's discard pile. Only useable on champions stunned this turn.",
												  min=0,
												  max=1,
												  validTargets = selectLoc(loc(oppPid, discardPloc)).where(isCardChampion()).where(isCardStunned()),
												  targetEffect = saveTarget("Thrown out bar").seq(moveTarget(sacrificePloc))
																.seq(createCardEffect(thrownOutBarBuff, loc(oppPid, buffsPloc)))
												  }),
                                            layout = createLayout({
													name = "Get out of my bar",	
													art = "art/T_orc",
													frame = "frames/Generic_CardFrame",
													xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">

        <box flexiblewidth="7">
            <tmpro text="Set aside a champion you stunned this turn. The next time your opponent shuffles their deck, put that champion on the bottom of their deck." fontsize="18" />
        </box>
    </hlayout>
</vlayout>
			]]
        }),
                                                                                    }
                                    }
                                }
                        ),
				cost = sacrificeSelfCost
			})
		},
        layout = createLayout({
            name = "Get out of my bar",	
            art = "art/T_orc",
			frame = "frames/Generic_CardFrame",
            xmlText=[[
<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{scrap}" fontsize="40"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Set aside a champion you stunned this turn. The next time your opponent shuffles their deck, put that champion on the bottom of their deck.

Or draw a card." fontsize="18" />
        </box>
    </hlayout>
</vlayout>
			]]
        }),
        layoutPath  = "art/T_orc",
	})
end	


-- S&R Enjoyer cards
function bird_dog_def()
	local layout = createLayout({
					name = "BirdWalking",
					art = "art/T_Spark",
					xmlText = [[<vlayout>
									<hlayout flexibleheight="1">
										<box flexiblewidth="1">
											<tmpro text="{expend_2}" fontsize="72"/>
										</box>
										<box flexiblewidth="7">
											<tmpro text="Draw a card and keep talking for 10 more minutes." fontsize="22" />
										</box>
									</hlayout>
								</vlayout>]]
				})
	return createSkillDef({
		id = "bird_dog",
		name = "BirdWalking",
		cardTypeLabel = "Skill",
		types = { skillType },
        abilities = {
			createAbility({
				id = "birdDogActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = layout,
                effect = drawCardsEffect(1),
				cost = goldCost(2)
			})
		},
		layout = layout,
		layoutPath= "art/T_Spark"
	})
end

function patron_shoutout_def()
	local layout = createLayout({
					name = "Shoutout to the Patrons",
					art = "art/T_Command",
					xmlText = [[{gold_3}]]
				})
    local promptLayout = createLayout({
        name = "Shoutout to the Patrons",
        art = "art/T_Command",
        text = format("Gain {0} gold.", { 3 }),
    })

	return createHeroAbilityDef({
		id = "patron_shoutout",
		name = "Shoutout to the Patrons",
		acquireCost = 0,
		cardTypeLabel = "Ability",
		playLocation = skillsPloc,
		types = { abilityType },
        abilities = {
			createAbility({
				id = "piercingScreechActivate",
				trigger = uiTrigger,
				promptType = showPrompt,
				layout = promptLayout,
				effect = gainGoldEffect(3),
				cost = sacrificeSelfCost
			})
		},
		layout = layout,
		layoutPath= "art/T_Command"
	})
end

function hero_dash_helper_carddef()
	local cardLayout = createLayout({
		name = "Hero-Helper Plug",
		art = "art/T_Stone_Guardian",
		frame = "frames/Warrior_CardFrame",
		cardTypeLabel = "Champion",
		types = { championType, noStealType },
		text = "<size=160%><pos=-40%><sprite name=\"expend\"></size><size=180%><voffset=12><space=1.36em><sprite name=\"combat_2\"></voffset></size><line-height=40%><br>_________________</line-height><br><size=75%><voffset=-3>Visit: Hero-Helper.com</voffset></size>"
	})
	return createChampionDef({
		id = "hero_helper",
		name = "Hero-Helper",
		acquireCost = 0,
		health = 2,
		isGuard = true,
		layout = cardLayout,
		factions = {},
		abilities = {
			createAbility({
				id = "hhMain",
				trigger = autoTrigger,
				activations = multipleActivations,
				cost = expendCost,
				effect = gainCombatEffect(2)
			})
		}
	})
end

function situational_card_carddef()
	local cardLayout = createLayout({
		name = "Situational Card",
		art = "art/T_Elixir_Of_Fortune",
		frame = "frames/Cleric_Frames/Cleric_Treasure_CardFrame",
		cardTypeLabel = "Item",
		text = "<size=150%><sprite name=\"gold_1\"><line-height=40%><br>_______________</line-height><br><size=75%><voffset=-3>I would buy this over<br> Tithe Priest.</voffset></size>"
	})
	
	return createItemDef({
		id = "situational_card",
		name = "Situational Card",
		acquireCost = 0,
		cardTypeLabel = "Item",
		types = { itemType, noStealType },
		layout = cardLayout,
		playLocation = castPloc,
		abilities = {
			createAbility({
				id = "situationMain",
				trigger = autoTrigger,
				effect = gainGoldEffect(1)
			}),
		}
	})
end

function wwyd_carddef()
	local cardLayout = createLayout({
		name = "WWYD?",
		art = "art/T_Edge_Of_The_Moat",
		frame = "frames/Ranger_CardFrame",
		cardTypeLabel = "Action",
		text = "<size=150%><sprite name=\"combat_3\"><size=80%>  or  <size=150%><sprite name=\"health_4\"><size=80%><br>If you have Street Thug in play, do both."
	})
	local faceLayout = layoutCard({
		title = "WWYD?",
		art = "art/T_Blazing_Fire",
		text = "<size=300%><sprite name=\"combat_3\">"
	})
	local removalLayout = layoutCard({
		title = "WWYD?",
		art = "art/T_Evangelize",
		text =  "<size=300%><sprite name=\"health_4\">"
	})
	
	return createActionDef({
		id = "wwyd_card",
		name = "WWYD?",
		acquireCost = 0,
		cardTypeLabel = "Action",
		types = { actionType, noStealType },
		layout = cardLayout,
		playLocation = castPloc,
		abilities = {
			createAbility({
				id = "noChampMain",
				trigger = autoTrigger,
				effect = ifElseEffect(selectLoc(currentInPlayLoc).where(isCardName("street_thug")).count().gte(1),
								gainCombatEffect(3).seq(gainHealthEffect(4)),
								pushChoiceEffect({
					choices = {
						{
							effect = gainCombatEffect(3),
							layout = faceLayout
						},
						{
							effect = gainHealthEffect(4),
							layout = removalLayout
						}
					}
				})
			)
			}),
		}
	})
end

function nostra_dbl_damus_carddef()
	local cardLayout = createLayout({
		name = "NostraDblDamus",
		art = "art/T_Channel",
		frame = "frames/Wizard_CardFrame",
		cardTypeLabel = "Champion",
		types = { championType, noStealType },
		text = "<size=140%><pos=-40%><sprite name=\"expend\"></size><size=160%><voffset=12><space=1.36em><sprite name=\"gold_1\"></voffset></size><br><size=50%>Reveal the top card of your<br> deck. Discard it or put it back<br> on the top of your deck.</voffset></size><line-height=30%><br>_________________</line-height><br><size=45%><voffset=-3>Visions of Thandar!</voffset></size>"
	})
	return createChampionDef({
		id = "nostra_dbl_damus",
		name = "NostraDblDamus",
		acquireCost = 0,
		health = 2,
		isGuard = false,
		layout = cardLayout,
		factions = {},
		abilities = {
			createAbility({
				id = "nddOnPlay",
				trigger = uiTrigger,
				activations = multipleActivations,
				cost = expendCost,
				effect = gainGoldEffect(1).seq(drawToLocationEffect(1, currentRevealLoc)
				.seq(promptSplit({
				   selector = selectLoc(currentRevealLoc),
				   take = const(4),
				   sort = const(2),
				   ef1 =moveToTopDeckTarget(true),
				   ef2 = discardTarget(),
				   header = "Visions of Thandar",
				   description = "Look at the top card of your deck. You may put it in your discard pile, or put it back on the top of your deck.",
				   pile1Name = "Top of Deck",
				   pile2Name = "Discard Pile",
				   eff1Tags = { buytopdeckTag },
				   eff2Tags = { cheapestTag }
			   }))
			)
			})
		}
	})
end

function blank_to_my_blank_carddef()
	local cardLayout = createLayout({
		name = "The _____ To My _____ ",
		art = "art/T_Paladin_Sword",
		frame = "frames/Warrior_CardFrame",
		cardTypeLabel = "Item",
		text = "<size=200%><sprite name=\"gold_1\"><space=0.7em><sprite name=\"combat_2\"></size>"
	})
	
	return createItemDef({
		id = "b2mb_card",
		name = "The Blank To My Blank",
		acquireCost = 0,
		cardTypeLabel = "Item",
		types = { itemType, noStealType },
		layout = cardLayout,
		playLocation = castPloc,
		abilities = {
			createAbility({
				id = "b2mbMain",
				trigger = autoTrigger,
				effect = gainGoldEffect(1).seq(gainCombatEffect(2)),
			}),
		}
	})
end

function congrats_youre_a_nerd_carddef()
	local cardLayout = createLayout({
		name = "Congrats, You're A Nerd",
		art = "art/treasures/T_Wise_Cat_Familiar",
		frame = "frames/Wizard_CardFrame",
		cardTypeLabel = "Action",
		text = "<size=100%>Opponent discards 1.<line-height=40%><br>_______________</line-height><br><size=50%><voffset=-3>When this card goes into your discard pile, put it on the bottom of your deck.</voffset></size>"
	})
	
	return createActionDef({
		id = "congrats_youre_a_nerd_card",
		name = "Congrats, You're A Nerd",
		acquireCost = 0,
		cardTypeLabel = "Action",
		types = { actionType, noStealType },
		layout = cardLayout,
		playLocation = castPloc,
		abilities = {
			createAbility({
				id = "congratsMain",
				trigger = autoTrigger,
				effect = oppDiscardEffect(1),
			}),
			createAbility({
				id = "congratsBottomDeck",
				trigger = onDiscardTrigger,
				effect = moveToBottomDeckTarget(false).apply(selectSource()),
			}),
			createAbility({
				id = "congratsBottomDeck2",
				trigger = endOfTurnTrigger,
				effect = moveToBottomDeckTarget(false).apply(selectSource()),
			}),
		}
	})
end



-- Easter Egg cards


function ee_demon_hunter_carddef()
    return createChampionDef(
        {
            id = "demon_hunter",
            name = "Demon Hunter",
			types = {championType},
			factions = { imperialFaction },
            acquireCost = 5,
            health = 5,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "demon_hunter",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
						promptType = showPrompt,
						layout = createLayout({
									name = "Demon Hunter",
									art = "art/T_Paladin_Sword",
                                    frame = "frames/Imperial_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout>
    <hlayout flexibleheight="2">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="42"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="2">
                <tmpro text="{combat_4}" fontsize="46" />
            </box>
            <box flexibleheight="2">
                <tmpro text="or
Hit up to 3 champions for 2 damage each." fontsize="22" />
            </box>
        </vlayout>
    </hlayout>
    
</vlayout>
                                    ]],
                                }),
                        effect = pushChoiceEffect({
							choices = {
								{
                                effect = gainCombatEffect(4),
                                layout = createLayout({
									name = "Demon Hunter",
									art = "art/T_Paladin_Sword",
                                    frame = "frames/Imperial_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{combat_4}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = {  }
                            },
							{
							effect = pushTargetedEffect({
                    desc = "Hit up to 3 champions for 2 damage each.",
                    validTargets = oppStunnableSelector(),
                    min = 1,
                    max = 3,
                    targetEffect = damageTarget(2),
			    }),
                                layout = createLayout({
									name = "Demon Hunter",
									art = "art/T_Paladin_Sword",
                                    frame = "frames/Imperial_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="Hit up to 3 champions for 2 damage each." fontsize="24" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = {  }
                            },
                            }
									})
												}),
																
			createAbility({
				  id = "demon_hunter_ally",
				  trigger = uiTrigger, 
				  cost = noCost,
				  activations = singleActivation,
				  effect = drawCardsEffect(1),
				  promptType = showPrompt,
					layout = layoutCard(
                                                {
                                                    name = "Demon Hunter",
													art = "art/T_Paladin_Sword",
													frame = "frames/Imperial_Champion_CardFrame",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <text text="Draw a card." fontsize="24"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),				  
				  allyFactions = {imperialFaction}
				}),
				
				createAbility({
				  id = "demon_hunter_2ally",
				  trigger = uiTrigger, 
				  effect = gainHealthEffect(selectLoc(loc(oppPid, discardPloc)).where(isCardStunned()).count().multiply(2)), 
				  promptType = showPrompt,
					layout = layoutCard(
                                                {
                                                    name = "Demon Hunter",
													art = "art/T_Paladin_Sword",
													frame = "frames/Imperial_Champion_CardFrame",
                                                    xmlText=[[
													<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="7">
            <text text="Gain {health_2} for each champion you have stunned this turn." fontsize="24"/>
</box>
</hlayout>
</vlayout>
													]]
                                                }
                                            ),
				  cost = noCost,
				  activations = singleActivation,
				  check = constBoolExpression(true),
				  allyFactions = {imperialFaction,imperialFaction}
				}),
            },
            layout = createLayout(
                {
                    name = "Demon Hunter",
                    art = "art/T_Paladin_Sword",
                    frame = "frames/Imperial_Champion_CardFrame",
					cost = 5,
                    xmlText=[[
					

<vlayout>
   <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="32"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="{combat_4} or 2 damage
to each of 3 champions." fontsize="18" />
        </box>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{imperial}" fontsize="32"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Gain {health_2} for each champion you stun this turn." fontsize="18" />
        </box>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{imperial}" fontsize="32"/>
        </box>
<box flexiblewidth="1">
            <tmpro text="{imperial}" fontsize="32"/>
        </box>
        <box flexiblewidth="7">
            <tmpro text="Draw 1" fontsize="20" />
        </box>
    </hlayout>
</vlayout>
					]],
                    health = 5,
                    isGuard = true
                }
            )
        }
    )
end


function mythic_mercs_ee_scrapforks_carddef()
    return createChampionDef(
        {
            id = "scrapforks",
            name = "Scrapforks",
			types = {championType},
            acquireCost = 4,
            health = 5,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "scrapforks_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = randomEffect({
					valueItem(4, gainCombatEffect(5)),
					valueItem(1, moveTarget(loc(currentPid, deckPloc)).apply(selectSource()).seq(shuffleEffect(loc(currentPid, deckPloc))))
                    }
                ).seq(noUndoEffect())
						
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Scrapforks",
                    art = "art/T_Fighter_Male",
                    frame = "frames/Treasure_CardFrame",
					cost = 4,
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="3">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <tmpro text="80% chance: {combat_5}
20% chance to not show up: shuffle back into deck" fontsize="20
" flexiblewidth="12" />
    </hlayout>
    <divider/>
    <hlayout flexibleheight="2">
            <tmpro text="His pauldrons are made from old cutlery." fontsize="20" fontstyle="italic" flexiblewidth="10" />
    </hlayout> 
</vlayout>
					]],
                    health = 5,
                    isGuard = false
                }
            )
        }
    )
end


function mythic_mercs_ee_dblducks_carddef()
    return createChampionDef(
        {
            id = "dblducks",
            name = "Dbl Ducks",
			types = {championType},
            acquireCost = 4,
            health = 5,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "dblducks",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(4).seq(moveTarget(myRevealPloc).apply(selectLoc(loc(currentPid, deckPloc)).take(2)).seq(noUndoEffect()).seq(promptSplit({
    selector = selectLoc(currentRevealLoc),
    take = const(1), -- number of cards to take for split
    sort = const(1), -- number of cards to be sorted for ef2
    ef1 = moveToTopDeckTarget(true), -- effect to be applied to cards left
    ef2 = moveToBottomDeckTarget(true, 1), -- effect to be applied to sorted cards
    header = "Gaze into the future", -- prompt header
    description = "Look at the top two cards of your deck. Put one on the top and one on the bottom of your deck.",
    rightPileDesc = "Right card on top.",
    pile1Name = "Top of Deck",
    pile2Name = "Bottom of Deck",
    eff1Tags = { buytopdeckTag },
    eff2Tags = { cheapestTag }
})))
						
                    }
                )
            },
            layout = createLayout(
                {
                    name = "DblDucks",
                    art = "art/T_Influence",
                    frame = "frames/Treasure_CardFrame",
					cost = 4,
                    xmlText=[[
					
<vlayout>
    <hlayout flexibleheight="1.8">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="42"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="1">
                <tmpro text="{combat_4}" fontsize="36" />
            </box>
            <box flexibleheight="2">
                <tmpro text="Gaze into the future:
Draw 2. Put one on top and one on bottom of your deck." fontsize="18" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        
        <box flexiblewidth="7">
            <tmpro text="Beware the man with two mallards on his crest." fontsize="18" fontstyle="italic"/>
        </box>
    </hlayout>
</vlayout>
					]],
                    health = 5,
                    isGuard = true
                }
            )
        }
    )
end


function mythic_mercs_ee_parsons_carddef()
    return createChampionDef(
        {
            id = "parsons_merc",
            name = "Parsons the Insider",
			types = {championType},
            acquireCost = 5,
            health = 5,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "parsons_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainGoldEffect(2)
						.seq(pushTargetedEffect({
												  desc="Move a card from your discard to the top of your deck.",
												  min=0,
												  max=1,
												  validTargets= selectLoc(loc(currentPid, discardPloc)),
												  targetEffect= moveToBottomDeckTarget(false, 0),
												  tags = {}
												}))
						
                    }
                ),
				createAbility({
                id = "parsons_faction",
                effect = pushChoiceEffect({
                        choices = {
                            {
                                effect = addSlotToTarget(createFactionsSlot({ imperialFaction }, { leavesPlayExpiry })).apply(selectSource()),
                                layout = createLayout({
                                    name = "Parons the Insider",
                                    art = "art/T_Thief_Male_Alternate",
                                    frame = "frames/Imperial_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{imperial}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = { addFactionTag }
                            },
                            {
                                effect = addSlotToTarget(createFactionsSlot({ wildFaction }, { leavesPlayExpiry })).apply(selectSource()),
                                layout = createLayout({
                                    name = "Parons the Insider",
                                    art = "art/T_Thief_Male_Alternate",
                                    frame = "frames/Wild_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{wild}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = { addFactionTag }
                            },
                            {
                                effect = addSlotToTarget(createFactionsSlot({ guildFaction }, { leavesPlayExpiry })).apply(selectSource()),
                                layout = createLayout({
                                    name = "Parons the Insider",
                                    art = "art/T_Thief_Male_Alternate",
                                    frame = "frames/Guild_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{guild}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = { addFactionTag }
                            },
                            {
                                effect = addSlotToTarget(createFactionsSlot({ necrosFaction }, { leavesPlayExpiry })).apply(selectSource()),
                                layout = createLayout({
                                    name = "Parons the Insider",
                                    art = "art/T_Thief_Male_Alternate",
                                    frame = "frames/Necros_Champion_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{necro}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                                tags = { addFactionTag }
                            }
                        }
                    }
                ),
                cost = noCost,
                trigger = onPlayTrigger,
                promptType = showPrompt,
                tags = { gainGoldTag }
            })
				
            },
            layout = createLayout(
                {
                    name = "Parsons the Insider",
                    art = "art/T_Thief_Male_Alternate",
                    frame = "frames/Treasure_CardFrame",
					cost = 5,
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="2">
            <tmpro text="Choose a faction as you play this card. It has the chosen faction until it leaves play." fontsize="14" fontstyle="italic" flexiblewidth="4" />
    </hlayout>     
  <hlayout flexibleheight="3">
            <tmpro text="{expend}" fontsize="50" flexiblewidth="2"/>
            <tmpro text="{gold_2}
You may put a card from your discard pile onto the bottom of your deck" fontsize="20
" flexiblewidth="12" />
    </hlayout>


</vlayout>
					]],
                    health = 5,
                    isGuard = false
                }
            )
        }
    )
end


function mythic_mercs_ee_stigmalingpa_carddef()
    return createChampionDef(
        {
            id = "stigmalingpa",
            name = "Stigmalingpa",
			types = {championType},
            acquireCost = 4,
            health = 4,
            isGuard = true,
            abilities = {
                createAbility(
                    {
                        id = "stigmalingpa",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainHealthEffect(4)
						.seq(pushTargetedEffect({
								desc = "Transform a Gold in your discard pile into a Ruby.",
								validTargets = selectLoc(loc(currentPid, discardPloc)).where(isCardType(coinType)),
								min = 0,
								max = 1,
								targetEffect = transformTarget("ruby"),
									
								}))
						
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Stigmalingpa",
                    art = "art/T_Wizard_Runic_Robes",
                    frame = "frames/Treasure_CardFrame",
					cost = 4,
                    xmlText=[[
					
<vlayout>
    <hlayout flexibleheight="1.8">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="42"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="1">
                <tmpro text="{health_4}" fontsize="36" />
            </box>
            <box flexibleheight="2">
                <tmpro text="Transform a Gold in your discard pile into a Ruby." fontsize="20" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        
        <box flexiblewidth="7">
            <tmpro text="I've been saying for a while now, 'It needs another Ruby.'" fontsize="18" fontstyle="italic"/>
        </box>
    </hlayout>
</vlayout>
					]],
                    health = 4,
                    isGuard = true
                }
            )
        }
    )
end

function mythic_mercs_ee_agent_th_carddef()
    return createChampionDef(
        {
            id = "agent_th",
            name = "Agent Teeth Hurting",
			types = {championType},
            acquireCost = 4,
            health = 5,
            isGuard = false,
            abilities = {
                createAbility(
                    {
                        id = "agent_th",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = randomEffect({
					valueItem(27, createCardEffect(cat_familiar_token_carddef(), currentInPlayLoc)),
					valueItem(27, createCardEffect(kit_cat_token_carddef(), currentInPlayLoc)),
					valueItem(27, createCardEffect(chunky_cat_token_carddef(), currentInPlayLoc)),
					valueItem(14, createCardEffect(big_bad_kitty_token_carddef(), currentInPlayLoc)),
					valueItem(5, createCardEffect(surprise_dragon_token_carddef(), currentInPlayLoc))
					
}).seq(noUndoEffect())
						
                    }
                )
            },
            layout = createLayout(
                {
                    name = "Agent Teeth Hurting",
                    art = "art/T_Elven_Curse",
                    frame = "frames/Treasure_CardFrame",
					cost = 4,
                    xmlText=[[
					
<vlayout>
    <hlayout flexibleheight="1.8">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="42"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="2">
                <tmpro text="Put a random cat token into play." fontsize="24" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        
        <box flexiblewidth="7">
            <tmpro text="The elves cursed him. Now he lives with eternal tooth ache." fontsize="20" fontstyle="italic"/>
        </box>
    </hlayout>
</vlayout>
					]],
                    health = 5,
                    isGuard = false
                }
            )
        }
    )
end


function cat_familiar_token_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "familiar_cat_token",
            name = "Familiar Cat",
			types = {minionType, championType, nostealType, tokenType},
            acquireCost = 0,
            health = 2,
            isGuard = false,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "familiar_cat_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = pushChoiceEffect({
							choices = {
								{
                                effect = gainCombatEffect(1),
                                layout = createLayout({
									name = "Familiar Cat",
									art = "art/T_Cat_Familiar",
                                    frame = "frames/Treasure_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{combat_1}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                            
                            },
							{
                                effect = gainGoldEffect(1),
                                layout = createLayout({
									name = "Familiar Cat",
									art = "art/T_Cat_Familiar",
                                    frame = "frames/Treasure_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{gold_1}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                               
                            },
							{
                                effect = gainHealthEffect(1),
                                layout = createLayout({
									name = "Familiar Cat",
									art = "art/T_Cat_Familiar",
                                    frame = "frames/Treasure_CardFrame",
                                    xmlText = [[
                                        <vlayout  forceheight="true">
                                            <icon text="{health_1}" fontsize="80" />
                                        </vlayout>
                                    ]],
                                }),
                               
                            }
							
												}})
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "familiar_cat_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Familiar Cat",
                    art = "art/T_Cat_Familiar",
                    frame = "frames/Treasure_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="35"/>
        </box>
        <box flexiblewidth="7">
            <icon text="{combat_1}or{gold_1}or{health_1}" fontsize="40"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 2,
                    isGuard = false
                }
            )
        }
    )
end

function kit_cat_token_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "kit_cat_token",
            name = "Kit Cat",
			types = {minionType, championType, nostealType, tokenType},
            acquireCost = 0,
            health = 2,
            isGuard = false,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "kit_cat_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = hitOpponentEffect(2)
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "kit_cat_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Kit Cat",
                    art = "art/treasures/T_Wise_Cat_Familiar",
                    frame = "frames/Treasure_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="6">
            <icon text="Deal 2 damage to opponent." fontsize="30"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 2,
                    isGuard = false
                }
            )
        }
    )
end

function chunky_cat_token_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "chunky_cat_token",
            name = "Kit Cat Chunky",
			types = {minionType, championType, nostealType, tokenType},
            acquireCost = 0,
            health = 2,
            isGuard = true,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "chunky_cat_main",
                        trigger = uiTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = drawCardsEffect(1)
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "chunky_cat_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Kit Cat Chunky",
                    art = "art/treasures/T_Fat_Cat_Familiar",
                    frame = "frames/Treasure_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="35"/>
        </box>
        <box flexiblewidth="7">
            <icon text="Draw 1" fontsize="40"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 2,
                    isGuard = true
                }
            )
        }
    )
end


function big_bad_kitty_token_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "big_bad_kitty_token",
            name = "Big Bad Kitty",
			types = {minionType, championType, nostealType, tokenType},
            acquireCost = 0,
            health = 3,
            isGuard = true,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "big_bad_kitty_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = gainCombatEffect(3)
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "big_bad_kitty_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Big Bad Kitty",
                    art = "art/T_Strength_of_the_wolf",
                    frame = "frames/Treasure_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="40"/>
        </box>
        <box flexiblewidth="6">
            <icon text="{combat_3}" fontsize="60"/>
</box>
</hlayout>
</vlayout>
					]],
                    health = 3,
                    isGuard = true
                }
            )
        }
    )
end

function surprise_dragon_token_carddef()
--This is a token champion, that self-sacrifices when it leaves play
    return createChampionDef(
        {
            id = "surprise_dragon_token",
            name = "Surprise Dragon",
			types = {minionType, championType, nostealType, tokenType},
            acquireCost = 0,
            health = 5,
            isGuard = true,
            abilities = {
			--base ability
                createAbility(
                    {
                        id = "surprise_dragon_main",
                        trigger = autoTrigger,
                        cost = expendCost,
                        activations = multipleActivations,
                        effect = damageTarget(2).apply(selectLoc(loc(oppPid, inPlayPloc)))
						
                    }
                )
            ,
			--self-sac ability
                createAbility(
                    {
                        id = "surprise_dragon_sac",
                        trigger = onLeavePlayTrigger,
                        cost = sacrificeSelfCost,
                        activations = singleActivations,
                        effect = nullEffect()
					}	
                    
                )},
            layout = createLayout(
                {
                    name = "Surprise Dragon",
                    art = "art/T_Arkus_Imperial_Dragon",
                    frame = "frames/Treasure_CardFrame",
                    xmlText=[[
					<vlayout>
    <hlayout flexibleheight="1">
        <box flexiblewidth="1">
            <tmpro text="{expend}" fontsize="42"/>
        </box>
        <vlayout flexiblewidth="7">
            <box flexibleheight="2">
                <tmpro text="Deal 2 damage to each opposing champion." fontsize="22" />
            </box>
        </vlayout>
    </hlayout>
    <divider/>
    <hlayout flexibleheight="1">
        
        <box flexiblewidth="7">
            <tmpro text="Surprise!
Cats aren't the only critters he keeps around the house." fontsize="18" fontstyle="italic"/>
        </box>
    </hlayout>
</vlayout>
					]],
                    health = 5,
                    isGuard = true
                }
            )
        }
    )
end

-- Auxiliary effects
local function goFirstEffect()
-- this is a dirty hack to make player going first only draw three cards for their first turn. Feel free to replace it with a better implementation.
	return createGlobalBuff({
        id="draw_three_start_buff",
        name = "Go First",
        abilities = {
            createAbility({
                id="go_first_draw_effect",
                trigger = endOfTurnTrigger,
                effect = ifElseEffect(
					getTurnsPlayed(oppPid).eq(1),
					nullEffect(),
					drawCardsEffect(2)
				)
            })
        }
    })
end

function setupGame(g)
    registerCards(
        g,
        {
	choose_demonologist_carddef(),
			demonologist_shadow_gem_carddef(),
			demonologist_shadow_feeder_carddef(),
			demonologist_void_guard_carddef(),
			demonologist_lesser_devourer_carddef(),
			demonologist_summon_demon_master_carddef(),
			demonologist_demonic_leech_carddef(),
			demonologist_succubus_carddef(),
			demonologist_fel_hound_carddef(),
			demonologist_incubus_carddef(),
			demonologist_keeper_of_the_void_carddef(),
			demonologist_demon_master_carddef(),
	choose_apothecary_carddef(),
			apothecary_apprentice_potion_maker_carddef(),
			apothecary_red_potion_carddef(),
			apothecary_green_potion_carddef(),
			apothecary_yellow_potion_carddef(),
			apothecary_mezzaluna_carddef(),
	choose_cryomancer_carddef(),
			cryomancer_ice_burst_carddef(),
			cryomancer_ice_shield_carddef(),
			cryomancer_ice_gem_carddef(),
			cryomancer_freeze_carddef(),
			cryomancer_frostbite_carddef(),
	choose_pyromancer_carddef(),
			pyromancer_sear_carddef(),
			pyromancer_scorch_carddef(),
			pyromancer_fire_shard_carddef(),
			pyromancer_combust_carddef(),
			pyromancer_fuel_1carddef(),
			pyromancer_fuel_2carddef(),
			pyromancer_fuel_3carddef(),
			pyromancer_fuel_4carddef(),
			pyromancer_fuel_5carddef(),
	choose_terramancer_carddef(),
			terramancer_earth_gem_carddef(),
			terramancer_hurl_boulder_carddef(),
			terramancer_tremor_carddef(),
			terramancer_clay_golem_carddef(),
			terramancer_move_earth_carddef(),
			terramancer_move_earth_free_carddef(),
			terramancer_swallowed_by_the_earth_def(),
	choose_thandarlorian_carddef(),
			thandarlorian_coordinated_attack_carddef(),
			thandarlorian_combat_shield_carddef(),
			thandarlorian_hand_ballista_carddef(),
			thandarlorian_bounty_hunters_stone_of_seeking_carddef(),
	choose_paladin_carddef(),
	        paladin_warhammer_carddef(),
            paladin_crusader_carddef(),
            paladin_prayer_carddef(),
            paladin_sacred_oath_carddef(),
	choose_witch_carddef(),
			witch_flash_freeze_carddef(),
			witch_cauldron_carddef(),
			siphon_life_def(),
			piercing_screech_def(),
	choose_shaman_carddef(),		
			flame_burst_carddef(),
			call_lightning_carddef(),
			gift_of_the_elements_carddef(),
			natures_blessing_carddef(),
	choose_king_midas_carddef(),		
			midas_kings_adviser_carddef(),
			greed_is_good_skilldef(),
			golden_touch_abilitydef(),
			midas_liquid_gold_carddef(),
			midas_gold_carddef(),
	choose_brewmaster_carddef(),		
			brewmaster_mead_carddef(),
			brewmaster_get_out_of_my_bar_carddef(),
			brewmaster_tap_a_keg_carddef(),
			brewmaster_regular_regulars_carddef(),
			brewmaster_irregular_regulars_carddef(),
			brewmaster_serve_the_strong_stuff_carddef(),
			brewmaster_zaboozer_carddef(),
			brewmaster_spilled_drink_carddef(),
	choose_S_and_R_carddef(),		
			hero_dash_helper_carddef(),
			situational_card_carddef(),
			bird_dog_def(),
			patron_shoutout_def(),
			wwyd_carddef(),
			nostra_dbl_damus_carddef(),
			blank_to_my_blank_carddef(),
			congrats_youre_a_nerd_carddef(),
	--Easter egg cards
			--[[mythic_mercs_ee_scrapforks_carddef(),
			mythic_mercs_ee_dblducks_carddef(),
			mythic_mercs_ee_stigmalingpa_carddef(),
			mythic_mercs_ee_agent_th_carddef(),
			cat_familiar_token_carddef(),
			kit_cat_token_carddef(),
			chunky_cat_token_carddef(),
			big_bad_kitty_token_carddef(),
			surprise_dragon_token_carddef(),]]
			mythic_mercs_ee_parsons_carddef(),
			ee_demon_hunter_carddef()
        }
    )

    standardSetup(
        g,
        {
            description = "Lilu Dallas Multi-Class. Multi-class script by Aarkenell and Userkaffe. Classes by Aarkenell, Userkaffe, AgentC13, Filtrophobe, Zabuza & WardenSlayer. Updated 12.04.2024.",
             playerOrder = { plid1, plid2 },
        ai = ai.CreateKillSwitchAi(createAggressiveAI(),  createHardAi2()),
        timeoutAi = createTimeoutAi(),
        opponents = { { plid1, plid2 } },
		tradeDeckExceptions = {
            -- here we set which cards populate market deck
           --[[ { qty=1, cardId="scrapforks" },
			{ qty=1, cardId="dblducks" },
			{ qty=1, cardId="stigmalingpa" },
			{ qty=1, cardId="agent_th" },]]
			{ qty=1, cardId="parsons_merc" },
			{ qty=1, cardId="demon_hunter" }
			
        },
        players = {
            {
                id = plid1,
                startDraw = 0,
                init = {
                    fromEnv = plid1
                },
                cards = {
                    buffs = {
						drawCardsCountAtTurnEndDef(3),
						goFirstEffect(),
                        discardCardsAtTurnStartDef(),
						chooseStart(),
						fatigueCount(42, 1, "FatigueP2")
                    }
                }
            },
            {
                id = plid2,
                startDraw = 0,
				init = {
                    fromEnv = plid2
                },
                cards = {
                    buffs = {
                        drawCardsCountAtTurnEndDef(5),
                        discardCardsAtTurnStartDef(),
						chooseStart(),
						fatigueCount(42, 1, "FatigueP2")
                    }
                }
            }            
        }
    })
end



function endGame(g)
end


function setupMeta(meta)
    meta.name = "tester 2"
    meta.minLevel = 1
    meta.maxLevel = 5
    meta.introbackground = ""
    meta.introheader = ""
    meta.introdescription = ""
    meta.path = "C:/Users/aaron/OneDrive/Documents/Aaron/Hero Realms/Lua/tester 2.lua"
     meta.features = {
}

end
